import{d as a,r as e,c as s,w as l,g as t,a as n,b as o,e as c,k as r,v as i,l as d,t as v,h as u,m as p,F as g,i as y,o as m,n as h}from"./vendor-vue-CBmYbXPK.js";import{u as b,b as f}from"./stores-B-Lw8dsK.js";import{L as k,_ as C}from"./component-financial-CtXviO0A.js";import{g as G,a as V,e as _}from"./services-DnyArwnx.js";const w={class:"gantt-chart-container"},T={class:"gantt-controls"},j={class:"control-group"},x={class:"control-group"},B={class:"button-group"},D={key:0},F={key:1},L={key:0,class:"alert alert-error"},$={key:1,class:"loading-state"},E={key:2,class:"empty-state"},O={class:"gantt-table"},P={class:"vessel-name"},A=["title"],S={key:4,class:"gantt-stats"},U={class:"stat-card"},I={class:"stat-value"},N={class:"stat-card"},R={class:"stat-value"},W={class:"stat-card"},q={class:"stat-value"},z=C(a({__name:"GanttChart",setup(a){const C=b();f();const z=e(null),H=e(30),J=e("all"),K=e(!1),M=e(""),Q=e([]),X=s(()=>Q.value.reduce((a,e)=>a+e.days.filter(a=>a.operation).length,0)),Y=async()=>{K.value=!0,M.value="";try{const a=C.voyages;a.length>0?Q.value=await G(a,H.value):Q.value=await V(H.value)}catch(a){M.value=a instanceof Error?a.message:"Failed to generate Gantt chart"}finally{K.value=!1}},Z=async()=>{try{await _()}catch(a){M.value=a instanceof Error?a.message:"Failed to export Gantt chart"}},aa=(a,e,s)=>s.operation?`${a} - Day ${e+1}: ${{loading:"Loading Port",discharge:"Discharge Port",transit:"Sea Transit",ballast:"Ballast Voyage",canal:"Canal Transit",bunker:"Bunkering",waiting:"Waiting"}[s.class]||s.class}`:"";return l(H,()=>{Y()}),t(()=>{Y()}),(a,e)=>(m(),n("div",w,[o("div",T,[o("div",j,[e[2]||(e[2]=o("label",{for:"gantt-days"},"Timeline Days:",-1)),r(o("input",{id:"gantt-days","onUpdate:modelValue":e[0]||(e[0]=a=>H.value=a),type:"number",min:"7",max:"365",class:"form-control"},null,512),[[i,H.value,void 0,{number:!0}]])]),o("div",x,[e[4]||(e[4]=o("label",{for:"voyage-filter"},"Voyage Filter:",-1)),r(o("select",{id:"voyage-filter","onUpdate:modelValue":e[1]||(e[1]=a=>J.value=a),class:"form-control"},[...e[3]||(e[3]=[o("option",{value:"all"},"All Voyages",-1),o("option",{value:"active"},"Active Only",-1),o("option",{value:"planned"},"Planned Only",-1),o("option",{value:"custom"},"Custom Selection",-1)])],512),[[d,J.value]])]),o("div",B,[o("button",{onClick:Y,class:"btn btn-primary"},[K.value?(m(),n("span",D,"Loading...")):(m(),n("span",F,"Refresh"))]),o("button",{onClick:Z,class:"btn btn-secondary"}," Export ")])]),M.value?(m(),n("div",L,v(M.value),1)):c("",!0),K.value?(m(),n("div",$,[u(k),e[5]||(e[5]=o("p",null,"Generating Gantt chart...",-1))])):0===Q.value.length?(m(),n("div",E,[...e[6]||(e[6]=[o("p",null,"No voyage data available. Generate a schedule first.",-1)])])):(m(),n("div",{key:3,class:"gantt-chart",ref_key:"ganttContainer",ref:z},[e[8]||(e[8]=p('<div class="gantt-legend" data-v-2a16e77c><span class="legend-item" data-v-2a16e77c><span class="legend-color op-loading" data-v-2a16e77c></span> П - Loading (Погрузка) </span><span class="legend-item" data-v-2a16e77c><span class="legend-color op-discharge" data-v-2a16e77c></span> В - Discharge (Выгрузка) </span><span class="legend-item" data-v-2a16e77c><span class="legend-color op-transit" data-v-2a16e77c></span> Т - Transit (Транзит) </span><span class="legend-item" data-v-2a16e77c><span class="legend-color op-ballast" data-v-2a16e77c></span> Б - Ballast (Балласт) </span><span class="legend-item" data-v-2a16e77c><span class="legend-color op-canal" data-v-2a16e77c></span> К - Canal (Канал) </span><span class="legend-item" data-v-2a16e77c><span class="legend-color op-bunker" data-v-2a16e77c></span> Ф - Bunker (Бункеровка) </span></div>',1)),o("table",O,[o("thead",null,[o("tr",null,[e[7]||(e[7]=o("th",{class:"vessel-header"},"Vessel",-1)),(m(!0),n(g,null,y(H.value,a=>(m(),n("th",{key:a,class:"day-header"},v(a),1))),128))])]),o("tbody",null,[(m(!0),n(g,null,y(Q.value,a=>(m(),n("tr",{key:a.vessel},[o("th",P,v(a.vessel),1),(m(!0),n(g,null,y(a.days,(e,s)=>(m(),n("td",{key:s,class:h(["gantt-cell",e.class?`op-${e.class}`:""]),title:aa(a.vessel,s,e)},v(e.operation),11,A))),128))]))),128))])])],512)),Q.value.length>0?(m(),n("div",S,[o("div",U,[e[9]||(e[9]=o("h4",null,"Vessels",-1)),o("p",I,v(Q.value.length),1)]),o("div",N,[e[10]||(e[10]=o("h4",null,"Timeline",-1)),o("p",R,v(H.value)+" days",1)]),o("div",W,[e[11]||(e[11]=o("h4",null,"Operations",-1)),o("p",q,v(X.value),1)])])):c("",!0)]))}}),[["__scopeId","data-v-2a16e77c"]]);export{z as G};
//# sourceMappingURL=component-gantt-_NkoJ77a.js.map
