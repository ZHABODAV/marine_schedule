import{d as a,r as t,c as s,g as e,w as l,a as n,b as o,k as i,l as c,m as d,t as r,G as v,h as u,F as g,i as p,o as y,n as b}from"./vendor-vue-CBmYbXPK.js";import{b as h,u as m,a as f}from"./stores-B-Lw8dsK.js";import{L as V,_ as C}from"./component-financial-CtXviO0A.js";import{C as _,r as k}from"./vendor-charts-BEO-w-Hm.js";import"./vendor-misc-DO6OT3jl.js";import"./services-DnyArwnx.js";import"./vendor-axios-CcrxTH1M.js";const A={class:"dashboard"},w={class:"dashboard-header"},D={class:"module-selector"},T={class:"stats-grid"},j={class:"stat-card"},N={class:"stat-content"},S={class:"stat-value"},$={class:"stat-label"},M={class:"stat-card"},x={class:"stat-content"},O={class:"stat-value"},P={class:"stat-label"},R={class:"stat-card"},z={class:"stat-content"},B={class:"stat-value"},L={class:"stat-label"},U={class:"charts-section"},W={class:"chart-card"},F={class:"chart-container"},G={class:"chart-card"},I={class:"chart-container"},J={class:"recent-activity"},Z={class:"activity-list"},q={key:0,class:"loading"},E={key:1,class:"empty-state"},H={key:2,class:"activity-items"},K={class:"activity-icon"},Q={class:"activity-content"},X={class:"activity-title"},Y={class:"activity-meta"},aa={class:"activity-date"},ta=C(a({__name:"DashboardView",setup(a){_.register(...k);const C=h(),ta=m(),sa=f(),ea=t("all"),la=t(!1),na=t(null),oa=t(null);let ia=null,ca=null;const da=s(()=>ta.voyages.slice().sort((a,t)=>{const s=new Date(a.updated_at||a.created_at||0).getTime();return new Date(t.updated_at||t.created_at||0).getTime()-s}).slice(0,10));function ra(){va()}async function va(){la.value=!0;try{const a="all"===ea.value?void 0:ea.value;await Promise.all([C.fetchVessels(a),ta.fetchVoyages(a),sa.fetchCargo(a)]),ua()}finally{la.value=!1}}function ua(){!function(){if(!na.value)return;ia&&ia.destroy();const a=na.value.getContext("2d");a&&(ia=new _(a,{type:"bar",data:{labels:["Planned","Active","Completed"],datasets:[{label:"Voyages",data:[ta.plannedVoyages.length,ta.activeVoyages.length,ta.completedVoyages.length],backgroundColor:["rgba(255, 206, 86, 0.7)","rgba(54, 162, 235, 0.7)","rgba(75, 192, 192, 0.7)"],borderColor:["rgba(255, 206, 86, 1)","rgba(54, 162, 235, 1)","rgba(75, 192, 192, 1)"],borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{stepSize:1}}}}}))}(),function(){if(!oa.value)return;ca&&ca.destroy();const a=oa.value.getContext("2d");if(!a)return;const t=Object.keys(C.vesselsByType),s=t.map(a=>C.vesselsByType[a].length);ca=new _(a,{type:"doughnut",data:{labels:t.length>0?t:["No Data"],datasets:[{label:"Vessels by Type",data:s.length>0?s:[1],backgroundColor:["rgba(255, 99, 132, 0.7)","rgba(54, 162, 235, 0.7)","rgba(255, 206, 86, 0.7)","rgba(75, 192, 192, 0.7)","rgba(153, 102, 255, 0.7)","rgba(255, 159, 64, 0.7)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}}})}()}function ga(a){if(!a)return"N/A";const t=new Date(a);if(isNaN(t.getTime()))return"N/A";const s=(new Date).getTime()-t.getTime(),e=Math.floor(s/6e4),l=Math.floor(s/36e5),n=Math.floor(s/864e5);return e<1?"Just now":e<60?`${e} min ago`:l<24?`${l} hour${l>1?"s":""} ago`:n<7?`${n} day${n>1?"s":""} ago`:t.toLocaleDateString()}return e(()=>{va()}),l(()=>[ta.voyages,C.vessels],()=>{ua()},{deep:!0}),(a,t)=>(y(),n("div",A,[o("div",w,[t[3]||(t[3]=o("h1",null,"Dashboard",-1)),o("div",D,[t[2]||(t[2]=o("label",{for:"module-select"},"Module:",-1)),i(o("select",{id:"module-select","onUpdate:modelValue":t[0]||(t[0]=a=>ea.value=a),onChange:ra},[...t[1]||(t[1]=[o("option",{value:"all"},"All Modules",-1),o("option",{value:"olya"},"Olya",-1),o("option",{value:"balakovo"},"Balakovo",-1),o("option",{value:"deepsea"},"Deep Sea",-1)])],544),[[c,ea.value]])])]),o("div",T,[o("div",j,[t[5]||(t[5]=o("div",{class:"stat-icon vessel-icon"},"üö¢",-1)),o("div",N,[t[4]||(t[4]=o("h3",null,"Total Vessels",-1)),o("p",S,r(v(C).totalVessels),1),o("span",$,"Active: "+r(v(C).activeVessels.length),1)])]),o("div",M,[t[7]||(t[7]=o("div",{class:"stat-icon voyage-icon"},"üìç",-1)),o("div",x,[t[6]||(t[6]=o("h3",null,"Active Voyages",-1)),o("p",O,r(v(ta).activeVoyages.length),1),o("span",P,"Planned: "+r(v(ta).plannedVoyages.length),1)])]),o("div",R,[t[9]||(t[9]=o("div",{class:"stat-icon cargo-icon"},"üì¶",-1)),o("div",z,[t[8]||(t[8]=o("h3",null,"Cargo Operations",-1)),o("p",B,r(v(sa).totalCargo),1),o("span",L,"Pending: "+r(v(sa).pendingCargo.length),1)])]),t[10]||(t[10]=d('<div class="stat-card" data-v-6728d8d5><div class="stat-icon status-icon" data-v-6728d8d5>‚úì</div><div class="stat-content" data-v-6728d8d5><h3 data-v-6728d8d5>System Status</h3><p class="stat-value status-ok" data-v-6728d8d5>Operational</p><span class="stat-label" data-v-6728d8d5>All systems running</span></div></div>',1))]),o("div",U,[o("div",W,[t[11]||(t[11]=o("h3",null,"Voyage Statistics",-1)),o("div",F,[o("canvas",{ref_key:"voyageChartCanvas",ref:na},null,512)])]),o("div",G,[t[12]||(t[12]=o("h3",null,"Vessel Utilization",-1)),o("div",I,[o("canvas",{ref_key:"utilizationChartCanvas",ref:oa},null,512)])])]),o("div",J,[t[14]||(t[14]=o("h3",null,"Recent Activity",-1)),o("div",Z,[la.value?(y(),n("div",q,[u(V)])):0===da.value.length?(y(),n("div",E,[...t[13]||(t[13]=[o("p",null,"No recent activity",-1)])])):(y(),n("div",H,[(y(!0),n(g,null,p(da.value,a=>{return y(),n("div",{key:a.id,class:"activity-item"},[o("div",K,[o("span",null,r((t=a.status,{planned:"üìã",active:"üö¢",completed:"‚úÖ",cancelled:"‚ùå"}[t]||"üìç")),1)]),o("div",Q,[o("p",X,r(a.vessel_name||"Vessel")+" - "+r(a.route_name||"Route"),1),o("p",Y,[o("span",{class:b(["activity-status",`status-${a.status}`])},r(a.status),3),o("span",aa,r(ga(a.updated_at||a.created_at)),1)])])]);var t}),128))]))])])]))}}),[["__scopeId","data-v-6728d8d5"]]);export{ta as default};
//# sourceMappingURL=view-dashboardview-DcFWjQTB.js.map
