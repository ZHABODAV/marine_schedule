import{d as e,r as a,c as t,g as l,a as s,b as n,e as o,F as i,i as r,k as c,l as u,v as d,s as p,G as v,E as m,z as y,o as b,n as f,t as h,f as g}from"./vendor-vue-CBmYbXPK.js";import{f as k}from"./stores-B-Lw8dsK.js";import{_ as w}from"./component-financial-CtXviO0A.js";import"./vendor-misc-DO6OT3jl.js";import"./services-DnyArwnx.js";import"./vendor-axios-CcrxTH1M.js";import"./vendor-charts-BEO-w-Hm.js";const R={class:"reports-view"},C={class:"report-selector-section"},D={class:"report-types"},V=["onClick"],x={class:"report-icon"},F={class:"report-features"},S={key:0,class:"config-section"},U={class:"form-grid"},M={class:"form-group"},A={class:"form-group"},G={class:"form-group"},j={key:0,class:"form-group full-width"},q={class:"vessel-tags"},P=["value"],z={class:"form-group full-width"},E={class:"checkbox-label"},B={class:"form-group full-width"},T={class:"checkbox-label"},I={class:"form-group full-width"},_={class:"checkbox-label"},H={class:"form-group"},O={class:"form-actions"},L=["disabled"],N={key:0},Y={key:1,class:"loading-spinner"},$={key:1,class:"active-reports-section"},Q={class:"active-reports-list"},J={class:"report-item-header"},K={class:"report-info"},W={class:"report-time"},X={key:0,class:"progress-container"},Z={class:"progress-bar"},ee={class:"progress-text"},ae={class:"report-actions"},te=["onClick"],le={key:1,class:"error-text"},se={key:2,class:"preview-section"},ne={class:"preview-content"},oe=["src"],ie={class:"history-section"},re={key:0,class:"history-list"},ce={class:"history-item-header"},ue={class:"history-actions"},de=["onClick"],pe=["onClick"],ve=["onClick"],me={key:1,class:"empty-state"},ye={class:"quick-export-section"},be={class:"quick-export-buttons"},fe=w(e({__name:"ReportsView",setup(e){const w=y(),fe=k(),he=[{value:"comprehensive",label:"Comprehensive Voyage Report",icon:"ðŸ“‹",description:"Complete voyage analysis with details, calculations, and leg-by-leg breakdown",features:["Voyage Details","Leg Analysis","Full Calculations","Performance Charts"]},{value:"fleet",label:"Fleet Analysis Report",icon:"ðŸš¢",description:"Fleet utilization, performance metrics, and comparison graphs",features:["Utilization Charts","Performance Metrics","Comparison Graphs","Fleet Stats"]},{value:"schedule",label:"Schedule Timeline Report",icon:"ðŸ“…",description:"Timeline visualization with Gantt charts and milestone tracking",features:["Timeline View","Gantt Charts","Milestone Tracking","Resource Allocation"]},{value:"financial",label:"Financial Analysis Report",icon:"ðŸ’°",description:"Cost breakdown, revenue projections, and profitability analysis",features:["Cost Breakdown","Revenue Projections","Profitability Analysis","ROI Metrics"]}],ge=a(null),ke=a(null),we=a({type:"comprehensive",format:"pdf",module:"",dateRange:{start:new Date((new Date).getFullYear(),0,1),end:new Date},vessels:[],includeCharts:!0,includeSummary:!0,includeDetails:!0}),Re=a(["MV Aurora","MV Borealis","MV Celestia","MV Draco","MV Eclipse","MV Frontier","MV Galaxy","MV Horizon"]),Ce=t(()=>ge.value&&we.value.module&&we.value.dateRange.start&&we.value.dateRange.end);function De(){we.value={type:ge.value||"comprehensive",format:"pdf",module:"",dateRange:{start:new Date((new Date).getFullYear(),0,1),end:new Date},vessels:[],includeCharts:!0,includeSummary:!0,includeDetails:!0}}async function Ve(){Ce.value&&await fe.generateReport(we.value)}async function xe(e){await fe.downloadReport(e)}function Fe(){ke.value=null}async function Se(){await fe.fetchReportHistory()}function Ue(e){w.push({name:e,query:{action:"export"}})}function Me(e){const a=he.find(a=>e.includes(a.value));return a?a.label:"Report"}function Ae(e){return new Date(e).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}return l(async()=>{await fe.fetchReportHistory()}),(e,a)=>(b(),s("div",R,[a[30]||(a[30]=n("div",{class:"reports-header"},[n("h1",null,"ðŸ“Š Reports & Analytics"),n("p",{class:"subtitle"},"Generate comprehensive PDF reports with visualizations and analytics")],-1)),n("section",C,[a[12]||(a[12]=n("h2",null,"Select Report Type",-1)),n("div",D,[(b(),s(i,null,r(he,e=>n("div",{key:e.value,class:f(["report-card",{selected:ge.value===e.value}]),onClick:a=>{return t=e.value,ge.value=t,void(we.value.type=t);var t}},[n("div",x,h(e.icon),1),n("h3",null,h(e.label),1),n("p",null,h(e.description),1),n("div",F,[(b(!0),s(i,null,r(e.features,e=>(b(),s("span",{key:e,class:"feature-tag"},h(e),1))),128))])],10,V)),64))])]),ge.value?(b(),s("section",S,[a[23]||(a[23]=n("h2",null,"Configure Report",-1)),n("form",{class:"report-config-form",onSubmit:m(Ve,["prevent"])},[n("div",U,[n("div",M,[a[14]||(a[14]=n("label",{for:"module"},"Module",-1)),c(n("select",{id:"module","onUpdate:modelValue":a[0]||(a[0]=e=>we.value.module=e),required:""},[...a[13]||(a[13]=[n("option",{value:""},"Select Module",-1),n("option",{value:"olya"},"Olya (River Transport)",-1),n("option",{value:"balakovo"},"Balakovo (Balker)",-1),n("option",{value:"deepsea"},"Deep Sea Voyages",-1)])],512),[[u,we.value.module]])]),n("div",A,[a[15]||(a[15]=n("label",{for:"startDate"},"Start Date",-1)),c(n("input",{id:"startDate","onUpdate:modelValue":a[1]||(a[1]=e=>we.value.dateRange.start=e),type:"date",required:""},null,512),[[d,we.value.dateRange.start]])]),n("div",G,[a[16]||(a[16]=n("label",{for:"endDate"},"End Date",-1)),c(n("input",{id:"endDate","onUpdate:modelValue":a[2]||(a[2]=e=>we.value.dateRange.end=e),type:"date",required:""},null,512),[[d,we.value.dateRange.end]])]),Re.value.length?(b(),s("div",j,[a[17]||(a[17]=n("label",null,"Vessels (Optional - Leave empty for all vessels)",-1)),n("div",q,[(b(!0),s(i,null,r(Re.value,e=>(b(),s("label",{key:e,class:"vessel-tag"},[c(n("input",{type:"checkbox",value:e,"onUpdate:modelValue":a[3]||(a[3]=e=>we.value.vessels=e)},null,8,P),[[p,we.value.vessels]]),n("span",null,h(e),1)]))),128))])])):o("",!0),n("div",z,[n("label",E,[c(n("input",{type:"checkbox","onUpdate:modelValue":a[4]||(a[4]=e=>we.value.includeCharts=e)},null,512),[[p,we.value.includeCharts]]),a[18]||(a[18]=n("span",null,"Include Charts & Visualizations",-1))])]),n("div",B,[n("label",T,[c(n("input",{type:"checkbox","onUpdate:modelValue":a[5]||(a[5]=e=>we.value.includeSummary=e)},null,512),[[p,we.value.includeSummary]]),a[19]||(a[19]=n("span",null,"Include Executive Summary",-1))])]),n("div",I,[n("label",_,[c(n("input",{type:"checkbox","onUpdate:modelValue":a[6]||(a[6]=e=>we.value.includeDetails=e)},null,512),[[p,we.value.includeDetails]]),a[20]||(a[20]=n("span",null,"Include Detailed Breakdown",-1))])]),n("div",H,[a[22]||(a[22]=n("label",{for:"format"},"Export Format",-1)),c(n("select",{id:"format","onUpdate:modelValue":a[7]||(a[7]=e=>we.value.format=e),required:""},[...a[21]||(a[21]=[n("option",{value:"pdf"},"PDF (Recommended)",-1),n("option",{value:"excel"},"Excel (.xlsx)",-1),n("option",{value:"csv"},"CSV (Data Only)",-1)])],512),[[u,we.value.format]])])]),n("div",O,[n("button",{type:"button",class:"btn btn-secondary",onClick:De}," Reset "),n("button",{type:"submit",class:"btn btn-primary",disabled:!Ce.value||v(fe).loading},[v(fe).loading?(b(),s("span",Y," â³ Generating... ")):(b(),s("span",N," ðŸš€ Generate Report "))],8,L)])],32)])):o("",!0),v(fe).activeReports.length?(b(),s("section",$,[a[24]||(a[24]=n("h2",null,"Active Report Generation",-1)),n("div",Q,[(b(!0),s(i,null,r(v(fe).activeReports,e=>(b(),s("div",{key:e.id,class:"report-item"},[n("div",J,[n("div",K,[n("h3",null,h(Me(e.id)),1),n("span",{class:f(["report-status",`status-${e.status}`])},h(e.status),3)]),n("small",W,h(Ae(e.createdAt)),1)]),"generating"===e.status?(b(),s("div",X,[n("div",Z,[n("div",{class:"progress-fill",style:g({width:`${e.progress}%`})},null,4)]),n("span",ee,h(e.progress)+"%",1)])):o("",!0),n("div",ae,["completed"===e.status&&e.downloadUrl?(b(),s("button",{key:0,class:"btn btn-sm btn-success",onClick:a=>xe(e.id)}," ðŸ“¥ Download ",8,te)):o("",!0),e.error?(b(),s("span",le,h(e.error),1)):o("",!0)])]))),128))])])):o("",!0),ke.value?(b(),s("section",se,[n("div",{class:"preview-header"},[a[25]||(a[25]=n("h2",null,"Report Preview",-1)),n("button",{class:"btn btn-sm",onClick:Fe},"âœ•")]),n("div",ne,[n("iframe",{src:ke.value.downloadUrl,class:"preview-iframe",frameborder:"0"},null,8,oe)])])):o("",!0),n("section",ie,[n("div",{class:"history-header"},[a[26]||(a[26]=n("h2",null,"Report History",-1)),n("button",{class:"btn btn-sm btn-secondary",onClick:Se}," ðŸ”„ Refresh ")]),v(fe).recentReports.length?(b(),s("div",re,[(b(!0),s(i,null,r(v(fe).recentReports,e=>(b(),s("div",{key:e.id,class:"history-item"},[n("div",ce,[n("div",null,[n("h4",null,h(Me(e.id)),1),n("small",null,"Generated: "+h(Ae(e.createdAt)),1)]),n("div",ue,[e.downloadUrl?(b(),s("button",{key:0,class:"btn btn-sm btn-primary",onClick:a=>xe(e.id),title:"Download"}," ðŸ“¥ ",8,de)):o("",!0),e.downloadUrl?(b(),s("button",{key:1,class:"btn btn-sm btn-secondary",onClick:a=>function(e){e.downloadUrl&&"completed"===e.status&&(ke.value=e)}(e),title:"Preview"}," ðŸ‘ï¸ ",8,pe)):o("",!0),n("button",{class:"btn btn-sm btn-danger",onClick:a=>async function(e){confirm("Are you sure you want to delete this report?")&&await fe.deleteReport(e)}(e.id),title:"Delete"}," ðŸ—‘ï¸ ",8,ve)])])]))),128))])):(b(),s("div",me,[...a[27]||(a[27]=[n("p",null,"No reports generated yet. Create your first report above!",-1)])]))]),n("section",ye,[a[28]||(a[28]=n("h2",null,"Quick Export",-1)),a[29]||(a[29]=n("p",{class:"section-hint"},"Generate reports quickly from common views",-1)),n("div",be,[n("button",{class:"btn btn-outline",onClick:a[8]||(a[8]=e=>Ue("voyage-builder"))}," ðŸ“ From Voyage Builder "),n("button",{class:"btn btn-outline",onClick:a[9]||(a[9]=e=>Ue("calendar"))}," ðŸ“… From Calendar "),n("button",{class:"btn btn-outline",onClick:a[10]||(a[10]=e=>Ue("network"))}," ðŸŒ From Network View "),n("button",{class:"btn btn-outline",onClick:a[11]||(a[11]=e=>Ue("financial"))}," ðŸ’° From Financial View ")])])]))}}),[["__scopeId","data-v-ee6f0df0"]]);export{fe as default};
//# sourceMappingURL=view-reportsview-ooW8kxAZ.js.map
