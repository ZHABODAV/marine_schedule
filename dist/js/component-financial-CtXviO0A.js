import{C as a,r as l}from"./vendor-charts-BEO-w-Hm.js";import{u as s,a as e}from"./stores-B-Lw8dsK.js";import{d as t,c as n,a as o,n as c,b as r,e as u,f as i,t as d,o as v,r as g,g as p,h as y,F as C,i as b,j as h}from"./vendor-vue-CBmYbXPK.js";import{c as f,o as m}from"./services-DnyArwnx.js";const k=(a,l)=>{const s=a.__vccOpts||a;for(const[e,t]of l)s[e]=t;return s},$={key:0,class:"loading-spinner__message"},w=k(t({__name:"LoadingSpinner",props:{size:{default:"medium"},message:{default:""},fullscreen:{type:Boolean,default:!1}},setup(a){const l=a,s=n(()=>{const a={small:"24px",medium:"40px",large:"60px"};return{width:a[l.size],height:a[l.size]}});return(l,e)=>(v(),o("div",{class:c(["loading-spinner",{"loading-spinner--fullscreen":a.fullscreen}])},[r("div",{class:"spinner",style:i(s.value)},[...e[0]||(e[0]=[r("div",{class:"spinner__circle"},null,-1)])],4),a.message?(v(),o("p",$,d(a.message),1)):u("",!0)],2))}}),[["__scopeId","data-v-461233a0"]]),_={class:"financial-container"},T={class:"financial-controls"},x={class:"button-group"},D={key:0},F={key:1},P={key:0,class:"alert alert-error"},R={key:1,class:"loading-state"},E={key:2,class:"empty-state"},A={class:"summary-cards"},B={class:"stat-card highlight"},L={class:"stat-value"},O={class:"stat-card"},j={class:"stat-value success"},z={class:"stat-card"},S={class:"stat-card"},V={class:"stat-value"},H={class:"section"},M={class:"cost-breakdown"},U={class:"breakdown-card"},I={class:"breakdown-header"},W={class:"cost-value warning"},q={class:"breakdown-details"},G={class:"detail-item"},J={class:"success"},K={class:"detail-item"},N={class:"breakdown-bar"},Q={class:"breakdown-card"},X={class:"breakdown-header"},Y={class:"cost-value primary"},Z={class:"breakdown-details"},aa={class:"detail-item"},la={class:"breakdown-bar"},sa={class:"breakdown-card"},ea={class:"breakdown-header"},ta={class:"cost-value"},na={class:"breakdown-details"},oa={class:"detail-item"},ca={class:"breakdown-bar"},ra={class:"section"},ua={class:"chart-container"},ia={class:"section"},da={class:"table-container"},va={class:"data-table"},ga={class:"cost-cell warning"},pa={class:"cost-cell"},ya={class:"cost-cell"},Ca={class:"cost-cell"},ba={class:"cost-cell success"},ha={class:"cost-cell"},fa={class:"total-row"},ma={class:"cost-cell warning"},ka={class:"cost-cell"},$a={class:"cost-cell"},wa={class:"cost-cell success"},_a={class:"cost-cell"},Ta=k(t({__name:"FinancialAnalysis",setup(t){a.register(...l);const k=s(),$=e(),Ta=g(null),xa=g(!1),Da=g(""),Fa=g(null);let Pa=null;const Ra=n(()=>Fa.value?Fa.value.voyages.reduce((a,l)=>a+l.bunkerCost,0):0),Ea=n(()=>Fa.value?Fa.value.voyages.reduce((a,l)=>a+l.hireCost,0):0),Aa=n(()=>Fa.value?Fa.value.totalCosts-Ra.value-Ea.value:0),Ba=n(()=>Fa.value?Fa.value.voyages.reduce((a,l)=>a+l.cargo,0):0),La=n(()=>Math.round(.15*Ra.value)),Oa=n(()=>Fa.value&&0!==Fa.value.voyages.length?35:0),ja=a=>Math.round(a).toLocaleString(),za=async()=>{xa.value=!0,Da.value="";try{Fa.value=await f(),await h(),Ha()}catch(a){Da.value=a instanceof Error?a.message:"Failed to calculate financial analysis"}finally{xa.value=!1}},Sa=async()=>{try{await m(),await za()}catch(a){Da.value=a instanceof Error?a.message:"Failed to optimize bunker strategy"}},Va=()=>{if(!Fa.value)return;let a="Voyage,Vessel,Cargo,Distance,Days,Bunker Cost,Hire Cost,Port Cost,Total Cost,Revenue,Profit,TCE\n";Fa.value.voyages.forEach(l=>{a+=`${l.id},${l.vessel},${l.cargo},${l.distance},${l.seaDays.toFixed(1)},${l.bunkerCost},${l.hireCost},${l.portCost},${l.totalCost},${l.revenue},${l.profit},${l.tce}\n`});const l=new Blob([a],{type:"text/csv"}),s=window.URL.createObjectURL(l),e=document.createElement("a");e.href=s,e.download=`financial_analysis_${(new Date).toISOString().slice(0,10)}.csv`,document.body.appendChild(e),e.click(),document.body.removeChild(e),window.URL.revokeObjectURL(s)},Ha=()=>{if(!Ta.value||!Fa.value)return;Pa&&Pa.destroy();const l=Ta.value.getContext("2d");l&&(Pa=new a(l,{type:"doughnut",data:{labels:["Bunker Costs","Hire Costs","Other Costs"],datasets:[{data:[Ra.value,Ea.value,Aa.value],backgroundColor:["#fdcb6e","#4a9eff","#b2bec3"],borderColor:["#f39c12","#0984e3","#95a5a6"],borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{color:"#e4e6eb",font:{size:14}}},tooltip:{callbacks:{label:a=>{const l=a.label||"",s=a.parsed||0,e=(s/(Fa.value?.totalCosts||1)*100).toFixed(1);return`${l}: $${ja(s)} (${e}%)`}}}}}}))};return p(async()=>{(k.voyages.length>0||$.cargo.length>0)&&await za()}),(a,l)=>(v(),o("div",_,[r("div",T,[r("div",x,[r("button",{onClick:za,class:"btn btn-primary"},[xa.value?(v(),o("span",D,"Calculating...")):(v(),o("span",F,"Calculate Analysis"))]),r("button",{onClick:Sa,class:"btn btn-secondary"}," Optimize Bunker "),r("button",{onClick:Va,class:"btn btn-secondary"}," Export Report ")])]),Da.value?(v(),o("div",P,d(Da.value),1)):u("",!0),xa.value?(v(),o("div",R,[y(w),l[0]||(l[0]=r("p",null,"Calculating financial analysis...",-1))])):Fa.value?(v(),o(C,{key:3},[r("div",A,[r("div",B,[l[2]||(l[2]=r("h4",null,"Total Costs",-1)),r("p",L,"$"+d(ja(Fa.value.totalCosts)),1)]),r("div",O,[l[3]||(l[3]=r("h4",null,"Total Revenue",-1)),r("p",j,"$"+d(ja(Fa.value.totalRevenue)),1)]),r("div",z,[l[4]||(l[4]=r("h4",null,"Total Profit",-1)),r("p",{class:c(["stat-value",Fa.value.totalProfit>=0?"success":"danger"])}," $"+d(ja(Fa.value.totalProfit)),3)]),r("div",S,[l[5]||(l[5]=r("h4",null,"Average TCE",-1)),r("p",V,"$"+d(ja(Fa.value.avgTCE))+"/day",1)])]),r("div",H,[l[13]||(l[13]=r("h3",null,"Cost Breakdown",-1)),r("div",M,[r("div",U,[r("div",I,[l[6]||(l[6]=r("h4",null,"Bunker Costs",-1)),r("span",W,"$"+d(ja(Ra.value)),1)]),r("div",q,[r("div",G,[l[7]||(l[7]=r("span",null,"Potential Savings",-1)),r("span",J,"$"+d(ja(La.value)),1)]),r("div",K,[l[8]||(l[8]=r("span",null,"Avg Consumption",-1)),r("span",null,d(Oa.value.toFixed(1))+" MT/day",1)])]),r("div",N,[r("div",{class:"bar-fill warning",style:i({width:Ra.value/Fa.value.totalCosts*100+"%"})},null,4)])]),r("div",Q,[r("div",X,[l[9]||(l[9]=r("h4",null,"Hire Costs",-1)),r("span",Y,"$"+d(ja(Ea.value)),1)]),r("div",Z,[r("div",aa,[l[10]||(l[10]=r("span",null,"Total Days",-1)),r("span",null,d(Fa.value.totalDays.toFixed(1)),1)])]),r("div",la,[r("div",{class:"bar-fill primary",style:i({width:Ea.value/Fa.value.totalCosts*100+"%"})},null,4)])]),r("div",sa,[r("div",ea,[l[11]||(l[11]=r("h4",null,"Other Costs",-1)),r("span",ta,"$"+d(ja(Aa.value)),1)]),r("div",na,[r("div",oa,[l[12]||(l[12]=r("span",null,"Port Fees, etc.",-1)),r("span",null,d((Aa.value/Fa.value.totalCosts*100).toFixed(1))+"%",1)])]),r("div",ca,[r("div",{class:"bar-fill",style:i({width:Aa.value/Fa.value.totalCosts*100+"%"})},null,4)])])])]),r("div",ra,[l[14]||(l[14]=r("h3",null,"Cost Distribution",-1)),r("div",ua,[r("canvas",{ref_key:"costChartCanvas",ref:Ta},null,512)])]),r("div",ia,[l[18]||(l[18]=r("h3",null,"Detailed Voyage Analysis",-1)),r("div",da,[r("table",va,[l[17]||(l[17]=r("thead",null,[r("tr",null,[r("th",null,"Voyage"),r("th",null,"Vessel"),r("th",null,"Cargo (MT)"),r("th",null,"Distance (nm)"),r("th",null,"Days"),r("th",null,"Bunker Cost"),r("th",null,"Hire Cost"),r("th",null,"Port Cost"),r("th",null,"Total Cost"),r("th",null,"Revenue"),r("th",null,"Profit"),r("th",null,"TCE")])],-1)),r("tbody",null,[(v(!0),o(C,null,b(Fa.value.voyages,a=>(v(),o("tr",{key:a.id},[r("td",null,d(a.id),1),r("td",null,d(a.vessel),1),r("td",null,d(ja(a.cargo)),1),r("td",null,d(ja(a.distance)),1),r("td",null,d(a.seaDays.toFixed(1)),1),r("td",ga,"$"+d(ja(a.bunkerCost)),1),r("td",pa,"$"+d(ja(a.hireCost)),1),r("td",ya,"$"+d(ja(a.portCost)),1),r("td",Ca,[r("strong",null,"$"+d(ja(a.totalCost)),1)]),r("td",ba,"$"+d(ja(a.revenue)),1),r("td",{class:c(["cost-cell",a.profit>=0?"success":"danger"])}," $"+d(ja(a.profit)),3),r("td",ha,"$"+d(ja(a.tce)),1)]))),128))]),r("tfoot",null,[r("tr",fa,[l[15]||(l[15]=r("td",{colspan:"2"},[r("strong",null,"TOTAL")],-1)),r("td",null,[r("strong",null,d(ja(Ba.value)),1)]),r("td",null,[r("strong",null,d(ja(Fa.value.totalDistance)),1)]),r("td",null,[r("strong",null,d(Fa.value.totalDays.toFixed(1)),1)]),r("td",ma,[r("strong",null,"$"+d(ja(Ra.value)),1)]),r("td",ka,[r("strong",null,"$"+d(ja(Ea.value)),1)]),l[16]||(l[16]=r("td",null,"-",-1)),r("td",$a,[r("strong",null,"$"+d(ja(Fa.value.totalCosts)),1)]),r("td",wa,[r("strong",null,"$"+d(ja(Fa.value.totalRevenue)),1)]),r("td",{class:c(["cost-cell",Fa.value.totalProfit>=0?"success":"danger"])},[r("strong",null,"$"+d(ja(Fa.value.totalProfit)),1)],2),r("td",_a,[r("strong",null,"$"+d(ja(Fa.value.avgTCE)),1)])])])])])])],64)):(v(),o("div",E,[...l[1]||(l[1]=[r("p",null,'Click "Calculate Analysis" to generate financial report',-1)])]))]))}}),[["__scopeId","data-v-c6f5e0fc"]]);export{Ta as F,w as L,k as _};
//# sourceMappingURL=component-financial-CtXviO0A.js.map
