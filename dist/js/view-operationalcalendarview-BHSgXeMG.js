import{d as e,r as t,w as a,c as l,a as n,b as s,e as o,k as i,v as r,F as c,i as u,o as d,t as v,g as p,I as m,n as g,h,D as y,C as f,q as b,E as w,B as D,G as k,f as C,J as S}from"./vendor-vue-CBmYbXPK.js";import{d as V,e as _}from"./stores-B-Lw8dsK.js";import{B as T,a as x,b as M,c as $}from"./view-cargomanagement-BocXzYqp.js";import{_ as F,L as U}from"./component-financial-CtXviO0A.js";const R={class:"date-range-picker"},L={class:"date-inputs"},O={class:"date-input-group"},I={class:"date-input-group"},H={key:0,class:"date-presets"},E=["onClick"],B=F(e({__name:"DateRangePicker",props:{modelValue:{},showPresets:{type:Boolean,default:!0},minDate:{},maxDate:{}},emits:["update:modelValue"],setup(e,{emit:p}){const m=e,g=p,h=t(),y=t(),f=t(""),b=t("");function w(e){if(!e)return"";const t=new Date(e);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`}function D(e){if(!e)return null;const t=new Date(e);return isNaN(t.getTime())?null:t}a(()=>m.modelValue,e=>{f.value=w(e.start),b.value=w(e.end)},{immediate:!0,deep:!0});const k=l(()=>null!==m.modelValue.start||null!==m.modelValue.end),C=t([{label:"Today",getRange:()=>{const e=new Date;return e.setHours(0,0,0,0),{start:e,end:e}}},{label:"This Week",getRange:()=>{const e=new Date,t=e.getDay(),a=new Date(e);a.setDate(e.getDate()-t),a.setHours(0,0,0,0);const l=new Date(a);return l.setDate(a.getDate()+6),{start:a,end:l}}},{label:"This Month",getRange:()=>{const e=new Date;return{start:new Date(e.getFullYear(),e.getMonth(),1),end:new Date(e.getFullYear(),e.getMonth()+1,0)}}},{label:"This Quarter",getRange:()=>{const e=new Date,t=Math.floor(e.getMonth()/3);return{start:new Date(e.getFullYear(),3*t,1),end:new Date(e.getFullYear(),3*t+3,0)}}},{label:"This Year",getRange:()=>{const e=new Date;return{start:new Date(e.getFullYear(),0,1),end:new Date(e.getFullYear(),11,31)}}},{label:"Last 7 Days",getRange:()=>{const e=new Date;e.setHours(23,59,59,999);const t=new Date(e);return t.setDate(e.getDate()-6),t.setHours(0,0,0,0),{start:t,end:e}}},{label:"Last 30 Days",getRange:()=>{const e=new Date;e.setHours(23,59,59,999);const t=new Date(e);return t.setDate(e.getDate()-29),t.setHours(0,0,0,0),{start:t,end:e}}},{label:"Last 90 Days",getRange:()=>{const e=new Date;e.setHours(23,59,59,999);const t=new Date(e);return t.setDate(e.getDate()-89),t.setHours(0,0,0,0),{start:t,end:e}}}]);function S(){const e=D(f.value);g("update:modelValue",{start:e,end:m.modelValue.end})}function V(){const e=D(b.value);g("update:modelValue",{start:m.modelValue.start,end:e})}function _(){f.value="",b.value="",g("update:modelValue",{start:null,end:null})}return(t,a)=>(d(),n("div",R,[s("div",L,[s("div",O,[i(s("input",{ref_key:"startInput",ref:h,"onUpdate:modelValue":a[0]||(a[0]=e=>f.value=e),type:"date",class:"date-input",placeholder:"Start Date",onChange:S},null,544),[[r,f.value]])]),a[2]||(a[2]=s("span",{class:"date-separator"},"to",-1)),s("div",I,[i(s("input",{ref_key:"endInput",ref:y,"onUpdate:modelValue":a[1]||(a[1]=e=>b.value=e),type:"date",class:"date-input",placeholder:"End Date",onChange:V},null,544),[[r,b.value]])]),k.value?(d(),n("button",{key:0,class:"clear-button",type:"button",onClick:_,title:"Clear dates"}," âœ• ")):o("",!0)]),e.showPresets?(d(),n("div",H,[(d(!0),n(c,null,u(C.value,e=>(d(),n("button",{key:e.label,class:"preset-button",type:"button",onClick:t=>function(e){const t=e.getRange();g("update:modelValue",t)}(e)},v(e.label),9,E))),128))])):o("",!0)]))}}),[["__scopeId","data-v-9202d1e5"]]),Y={class:"selected-items"},j={key:0,class:"placeholder"},P=["onClick"],A={key:2,class:"selected-count"},N={key:0,class:"multi-select-dropdown"},z={key:0,class:"dropdown-search"},W=["checked",".indeterminate"],q={class:"dropdown-options"},G=["onClick"],Q=["checked"],J={key:0,class:"dropdown-empty"},K=F(e({__name:"MultiSelect",props:{modelValue:{},options:{},placeholder:{default:"Select..."},disabled:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0},showSelectAll:{type:Boolean,default:!0}},emits:["update:modelValue"],setup(e,{emit:D}){const k=e,C=D,S=t(!1),V=t(""),_=t(),T=l(()=>k.options.filter(e=>k.modelValue.includes(e.value))),x=l(()=>{if(!V.value)return k.options;const e=V.value.toLowerCase();return k.options.filter(t=>t.label.toLowerCase().includes(e))}),M=l(()=>k.options.length>0&&k.modelValue.length===k.options.length),$=l(()=>k.modelValue.length>0&&k.modelValue.length<k.options.length);function F(){k.disabled||(S.value=!S.value,S.value&&setTimeout(()=>_.value?.focus(),50))}function U(e){return k.modelValue.includes(e)}function R(){M.value?C("update:modelValue",[]):C("update:modelValue",k.options.map(e=>e.value))}function L(e){e.target.closest(".multi-select")||(S.value=!1)}return p(()=>{document.addEventListener("click",L)}),m(()=>{document.removeEventListener("click",L)}),a(S,e=>{e||(V.value="")}),(t,a)=>(d(),n("div",{class:g(["multi-select",{"is-open":S.value,"is-disabled":e.disabled}])},[s("div",{class:"multi-select-trigger",onClick:F},[s("div",Y,[0===T.value.length?(d(),n("span",j,v(e.placeholder),1)):T.value.length<=3?(d(!0),n(c,{key:1},u(T.value,e=>(d(),n("span",{key:e.value,class:"selected-tag"},[b(v(e.label)+" ",1),s("button",{class:"tag-remove",onClick:w(t=>function(e){const t=k.modelValue.filter(t=>t!==e);C("update:modelValue",t)}(e.value),["stop"])},"Ã—",8,P)]))),128)):(d(),n("span",A,v(T.value.length)+" selected",1))]),a[4]||(a[4]=s("svg",{class:"dropdown-arrow",width:"12",height:"8",viewBox:"0 0 12 8",fill:"none"},[s("path",{d:"M1 1L6 6L11 1",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1))]),h(y,{name:"dropdown"},{default:f(()=>[S.value?(d(),n("div",N,[e.searchable?(d(),n("div",z,[i(s("input",{ref_key:"searchInput",ref:_,"onUpdate:modelValue":a[0]||(a[0]=e=>V.value=e),type:"text",class:"search-input",placeholder:"Search...",onClick:a[1]||(a[1]=w(()=>{},["stop"]))},null,512),[[r,V.value]])])):o("",!0),e.showSelectAll?(d(),n("div",{key:1,class:"dropdown-option select-all",onClick:R},[s("input",{type:"checkbox",checked:M.value,".indeterminate":$.value,onClick:a[2]||(a[2]=w(()=>{},["stop"]))},null,40,W),a[5]||(a[5]=s("span",null,"Select All",-1))])):o("",!0),s("div",q,[(d(!0),n(c,null,u(x.value,e=>(d(),n("div",{key:e.value,class:g(["dropdown-option",{"is-selected":U(e.value)}]),onClick:t=>function(e){const t=U(e)?k.modelValue.filter(t=>t!==e):[...k.modelValue,e];C("update:modelValue",t)}(e.value)},[s("input",{type:"checkbox",checked:U(e.value),onClick:a[3]||(a[3]=w(()=>{},["stop"]))},null,8,Q),s("span",null,v(e.label),1)],10,G))),128)),0===x.value.length?(d(),n("div",J," No options found ")):o("",!0)])])):o("",!0)]),_:1})],2))}}),[["__scopeId","data-v-cbbbd2bd"]]),X={class:"global-filters-bar"},Z={class:"filters-container"},ee={class:"filter-group"},te={class:"filter-group"},ae={key:0,class:"filter-group"},le={key:1,class:"filter-group"},ne={key:2,class:"filter-group"},se={key:3,class:"filter-group"},oe={key:4,class:"filter-group"},ie={key:5,class:"filter-group filter-search"},re={class:"filters-actions"},ce={class:"filter-presets"},ue={class:"filter-buttons"},de=F(e({__name:"GlobalFiltersBar",props:{context:{},showVessels:{type:Boolean,default:!0},showPorts:{type:Boolean,default:!0},showRoutes:{type:Boolean,default:!0},showCargoTypes:{type:Boolean,default:!0},showStatuses:{type:Boolean,default:!0},showSearch:{type:Boolean,default:!0},vesselOptions:{default:()=>[]},portOptions:{default:()=>[]},routeOptions:{default:()=>[]},cargoTypeOptions:{default:()=>[]},statusOptions:{default:()=>[]}},emits:["filtersChanged"],setup(e,{emit:i}){const r=e,c=i,u=V(),p=t(""),m=l(()=>{switch(r.context){case"voyage":return u.voyageFilters;case"schedule":return u.scheduleFilters;case"report":return u.reportFilters;case"calendar":return u.calendarFilters}}),g=l(()=>{switch(r.context){case"voyage":return u.activeVoyageFiltersCount;case"schedule":return u.activeScheduleFiltersCount;case"report":return u.activeReportFiltersCount;case"calendar":return u.activeCalendarFiltersCount}}),y=t({...m.value});a(m,e=>{y.value={...e}},{deep:!0});const w=l(()=>[{value:"all",label:"All Modules"},{value:"olya",label:"Olya"},{value:"deep-sea",label:"Deep Sea"},{value:"balakovo",label:"Balakovo"}]),k=l(()=>u.presets.map(e=>({value:e.name,label:e.name})));function C(){switch(r.context){case"voyage":u.updateVoyageFilters(y.value);break;case"schedule":u.updateScheduleFilters(y.value);break;case"report":u.updateReportFilters(y.value);break;case"calendar":u.updateCalendarFilters(y.value)}c("filtersChanged",y.value)}function S(){switch(r.context){case"voyage":u.resetVoyageFilters();break;case"schedule":u.resetScheduleFilters();break;case"report":u.resetReportFilters();break;case"calendar":u.resetCalendarFilters()}p.value=""}function _(e){e&&u.applyPreset(e,r.context)}return(t,a)=>(d(),n("div",X,[s("div",Z,[s("div",ee,[a[9]||(a[9]=s("label",{class:"filter-label"},"Module",-1)),h(T,{modelValue:y.value.module,"onUpdate:modelValue":[a[0]||(a[0]=e=>y.value.module=e),C],options:w.value,placeholder:"All Modules"},null,8,["modelValue","options"])]),s("div",te,[a[10]||(a[10]=s("label",{class:"filter-label"},"Date Range",-1)),h(B,{modelValue:y.value.dateRange,"onUpdate:modelValue":[a[1]||(a[1]=e=>y.value.dateRange=e),C]},null,8,["modelValue"])]),e.showVessels?(d(),n("div",ae,[a[11]||(a[11]=s("label",{class:"filter-label"},"Vessels",-1)),h(K,{modelValue:y.value.vessels,"onUpdate:modelValue":[a[2]||(a[2]=e=>y.value.vessels=e),C],options:e.vesselOptions,placeholder:"Select vessels..."},null,8,["modelValue","options"])])):o("",!0),e.showPorts?(d(),n("div",le,[a[12]||(a[12]=s("label",{class:"filter-label"},"Ports",-1)),h(K,{modelValue:y.value.ports,"onUpdate:modelValue":[a[3]||(a[3]=e=>y.value.ports=e),C],options:e.portOptions,placeholder:"Select ports..."},null,8,["modelValue","options"])])):o("",!0),e.showRoutes?(d(),n("div",ne,[a[13]||(a[13]=s("label",{class:"filter-label"},"Routes",-1)),h(K,{modelValue:y.value.routes,"onUpdate:modelValue":[a[4]||(a[4]=e=>y.value.routes=e),C],options:e.routeOptions,placeholder:"Select routes..."},null,8,["modelValue","options"])])):o("",!0),e.showCargoTypes?(d(),n("div",se,[a[14]||(a[14]=s("label",{class:"filter-label"},"Cargo Types",-1)),h(K,{modelValue:y.value.cargoTypes,"onUpdate:modelValue":[a[5]||(a[5]=e=>y.value.cargoTypes=e),C],options:e.cargoTypeOptions,placeholder:"Select cargo types..."},null,8,["modelValue","options"])])):o("",!0),e.showStatuses?(d(),n("div",oe,[a[15]||(a[15]=s("label",{class:"filter-label"},"Status",-1)),h(K,{modelValue:y.value.statuses,"onUpdate:modelValue":[a[6]||(a[6]=e=>y.value.statuses=e),C],options:e.statusOptions,placeholder:"Select statuses..."},null,8,["modelValue","options"])])):o("",!0),e.showSearch?(d(),n("div",ie,[a[16]||(a[16]=s("label",{class:"filter-label"},"Search",-1)),h(x,{modelValue:y.value.searchQuery,"onUpdate:modelValue":[a[7]||(a[7]=e=>y.value.searchQuery=e),C],type:"text",placeholder:"Search...",clearable:""},null,8,["modelValue"])])):o("",!0)]),s("div",re,[s("div",ce,[h(T,{modelValue:p.value,"onUpdate:modelValue":[a[8]||(a[8]=e=>p.value=e),_],options:k.value,placeholder:"Presets...",clearable:""},null,8,["modelValue","options"])]),s("div",ue,[g.value>0?(d(),D(M,{key:0,variant:"text",size:"small",onClick:S},{default:f(()=>[b(" Clear All ("+v(g.value)+") ",1)]),_:1})):o("",!0)])])]))}}),[["__scopeId","data-v-1273bceb"]]),ve={class:"calendar-month-view"},pe={class:"calendar-grid"},me={class:"day-header"},ge={class:"day-number"},he={key:0,class:"event-count"},ye={class:"day-events"},fe=["onClick"],be={class:"event-title"},we={class:"event-time"},De=["onClick"],ke=F(e({__name:"CalendarMonthView",props:{events:{},currentDate:{}},emits:["event-click"],setup(e,{emit:t}){const a=e,i=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],r=l(()=>{const e=a.currentDate.getFullYear(),t=a.currentDate.getMonth(),l=new Date(e,t,1).getDay(),n=new Date(e,t+1,0).getDate(),s=l,o=new Date(e,t,0).getDate(),i=42-(s+n),r=[],c=new Date;c.setHours(0,0,0,0);for(let a=s-1;a>=0;a--){const l=new Date(e,t-1,o-a);r.push(p(l,!1,c))}for(let a=1;a<=n;a++){const l=new Date(e,t,a);r.push(p(l,!0,c))}for(let a=1;a<=i;a++){const l=new Date(e,t+1,a);r.push(p(l,!1,c))}return r});function p(e,t,l){const n=new Date(e);n.setHours(0,0,0,0);const s=new Date(e);s.setHours(23,59,59,999);const o=a.events.filter(e=>{const t=new Date(e.start),a=new Date(e.end);return t<=s&&a>=n});return{date:e,isCurrentMonth:t,isToday:n.getTime()===l.getTime(),events:o}}return(e,t)=>(d(),n("div",ve,[s("div",pe,[(d(),n(c,null,u(i,e=>s("div",{key:e,class:"calendar-header-cell"},v(e),1)),64)),(d(!0),n(c,null,u(r.value,(a,l)=>(d(),n("div",{key:l,class:g(["calendar-day",{"other-month":!a.isCurrentMonth,today:a.isToday,"has-events":a.events.length>0}])},[s("div",me,[s("span",ge,v(a.date.getDate()),1),a.events.length>0?(d(),n("span",he,v(a.events.length),1)):o("",!0)]),s("div",ye,[(d(!0),n(c,null,u(a.events.slice(0,3),a=>{return d(),n("div",{key:a.id,class:g(["event-item",`module-${a.module}`,`status-${a.status}`]),onClick:t=>e.$emit("event-click",a)},[t[0]||(t[0]=s("div",{class:"event-dot"},null,-1)),s("div",be,v(a.vessel),1),s("div",we,v((l=a.start,new Date(l).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}))),1)],10,fe);var l}),128)),a.events.length>3?(d(),n("button",{key:0,class:"more-events",onClick:e=>{}}," +"+v(a.events.length-3)+" more ",9,De)):o("",!0)])],2))),128))])]))}}),[["__scopeId","data-v-3550035f"]]),Ce={class:"calendar-week-view"},Se={class:"week-grid"},Ve={class:"day-name"},_e={class:"day-number"},Te={key:0,class:"day-event-count"},xe={class:"time-label"},Me=["onClick"],$e={class:"event-content"},Fe={class:"event-vessel"},Ue={class:"event-route"},Re={class:"event-time-range"},Le=F(e({__name:"CalendarWeekView",props:{events:{},currentDate:{}},emits:["event-click"],setup(e,{emit:t}){const a=e,i=Array.from({length:24},(e,t)=>t),r=l(()=>{const e=[],t=new Date;t.setHours(0,0,0,0);const l=new Date(a.currentDate),n=l.getDay(),s=new Date(l);s.setDate(l.getDate()-n),s.setHours(0,0,0,0);for(let o=0;o<7;o++){const l=new Date(s);l.setDate(s.getDate()+o);const n=new Date(l);n.setHours(0,0,0,0);const i=new Date(l);i.setHours(23,59,59,999);const r=a.events.filter(e=>{const t=new Date(e.start),a=new Date(e.end);return t<=i&&a>=n}).length;e.push({date:l,dayName:l.toLocaleDateString("en-US",{weekday:"short"}),isToday:n.getTime()===t.getTime(),eventCount:r})}return e});function p(e){return`${0===e?12:e>12?e-12:e}:00 ${e>=12?"PM":"AM"}`}function m(e){return new Date(e).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}function h(e,t){const a=new Date;return e.getDate()===a.getDate()&&e.getMonth()===a.getMonth()&&e.getFullYear()===a.getFullYear()&&t===a.getHours()}function y(e,t){const l=new Date(e);l.setHours(t,0,0,0);const n=new Date(e);return n.setHours(t,59,59,999),a.events.filter(e=>{const t=new Date(e.start),a=new Date(e.end);return t<=n&&a>=l})}function f(e,t,a){const l=new Date(t);l.setHours(a,0,0,0),new Date(t).setHours(a+1,0,0,0);const n=new Date(e.start),s=new Date(e.end),o=Math.max(0,(n.getTime()-l.getTime())/6e4),i=(Math.min(60,(s.getTime()-l.getTime())/6e4)-o)/60*100;return{top:o/60*100+"%",height:`${Math.max(i,20)}%`}}return(e,t)=>(d(),n("div",Ce,[s("div",Se,[t[0]||(t[0]=s("div",{class:"time-label-header"},null,-1)),(d(!0),n(c,null,u(r.value,e=>(d(),n("div",{key:e.date.toISOString(),class:g(["day-header",{today:e.isToday}])},[s("div",Ve,v(e.dayName),1),s("div",_e,v(e.date.getDate()),1),e.eventCount>0?(d(),n("div",Te,v(e.eventCount)+" events ",1)):o("",!0)],2))),128)),(d(!0),n(c,null,u(k(i),t=>(d(),n(c,{key:t},[s("div",xe,v(p(t)),1),(d(!0),n(c,null,u(r.value,a=>(d(),n("div",{key:`${a.date.toISOString()}-${t}`,class:g(["time-slot",{"current-hour":h(a.date,t)}])},[(d(!0),n(c,null,u(y(a.date,t),l=>(d(),n("div",{key:l.id,class:g(["event-block",`module-${l.module}`,`status-${l.status}`]),style:C(f(l,a.date,t)),onClick:t=>e.$emit("event-click",l)},[s("div",$e,[s("div",Fe,v(l.vessel),1),s("div",Ue,v(l.route),1),s("div",Re,v(m(l.start))+" - "+v(m(l.end)),1)])],14,Me))),128))],2))),128))],64))),128))])]))}}),[["__scopeId","data-v-417c79cd"]]),Oe={class:"calendar-year-view"},Ie={class:"year-grid"},He={class:"mini-month-header"},Ee={class:"month-name"},Be={class:"event-count-badge"},Ye={class:"mini-calendar-grid"},je=["onClick"],Pe={class:"mini-day-number"},Ae={key:0,class:"mini-event-indicator"},Ne={key:0,class:"month-summary"},ze={class:"summary-item"},We={class:"summary-text"},qe={class:"summary-item"},Ge={class:"summary-text"},Qe=F(e({__name:"CalendarYearView",props:{events:{},currentDate:{}},emits:["event-click","month-click"],setup(e,{emit:t}){const a=e,i=t,r=["S","M","T","W","T","F","S"],p=l(()=>{const e=a.currentDate.getFullYear(),t=new Date;return t.setHours(0,0,0,0),Array.from({length:12},(l,n)=>{const s=new Date(e,n,1),o=new Date(e,n+1,0).getDate(),i=s.getDay(),r=new Date(e,n,0).getDate(),c=42-(i+o),u=[];for(let a=i-1;a>=0;a--){const l=new Date(e,n-1,r-a);u.push(m(l,!1,t))}for(let a=1;a<=o;a++){const l=new Date(e,n,a);u.push(m(l,!0,t))}for(let a=1;a<=c;a++){const l=new Date(e,n+1,a);u.push(m(l,!1,t))}const d=a.events.filter(t=>{const a=new Date(t.start);return a.getFullYear()===e&&a.getMonth()===n}),v=new Set(d.map(e=>e.vessel)).size,p=d.reduce((e,t)=>e+(t.cargo||0),0);return{monthIndex:n,name:s.toLocaleDateString("en-US",{month:"long"}),days:u,eventCount:d.length,vesselCount:v,totalCargo:p}})});function m(e,t,l){const n=new Date(e);n.setHours(0,0,0,0);const s=new Date(e);s.setHours(23,59,59,999);const o=a.events.filter(e=>{const t=new Date(e.start),a=new Date(e.end);return t<=s&&a>=n}).length;return{number:e.getDate(),date:e,isCurrentMonth:t,isToday:n.getTime()===l.getTime(),eventCount:o}}return(e,t)=>(d(),n("div",Oe,[s("div",Ie,[(d(!0),n(c,null,u(p.value,(e,a)=>{return d(),n("div",{key:a,class:"mini-month"},[s("div",He,[s("h3",Ee,v(e.name),1),s("span",Be,v(e.eventCount),1)]),s("div",Ye,[(d(),n(c,null,u(r,e=>s("div",{key:e,class:"mini-day-header"},v(e),1)),64)),(d(!0),n(c,null,u(e.days,(t,a)=>(d(),n("div",{key:a,class:g(["mini-day",{"other-month":!t.isCurrentMonth,today:t.isToday,"has-events":t.eventCount>0,clickable:t.eventCount>0}]),onClick:a=>{return t.eventCount>0&&(l=e.monthIndex,t.date,void i("month-click",l));var l}},[s("span",Pe,v(t.number),1),t.eventCount>0?(d(),n("span",Ae,v(t.eventCount),1)):o("",!0)],10,je))),128))]),e.eventCount>0?(d(),n("div",Ne,[s("div",ze,[t[0]||(t[0]=s("span",{class:"summary-icon"},"ðŸš¢",-1)),s("span",We,v(e.vesselCount)+" vessels",1)]),s("div",qe,[t[1]||(t[1]=s("span",{class:"summary-icon"},"ðŸ“¦",-1)),s("span",Ge,v((l=e.totalCargo,new Intl.NumberFormat("en-US",{maximumFractionDigits:0}).format(l)))+" MT",1)])])):o("",!0)]);var l}),128))])]))}}),[["__scopeId","data-v-9c5f63ca"]]),Je={class:"calendar-timeline-view"},Ke={class:"timeline-header"},Xe={class:"timeline-dates-header"},Ze={class:"date-day"},et={class:"date-weekday"},tt={class:"timeline-body"},at={class:"vessel-column"},lt={class:"vessel-name"},nt={class:"vessel-stats"},st={class:"timeline-grid"},ot=["onClick"],it={class:"event-bar-content"},rt={class:"event-bar-title"},ct={class:"event-bar-details"},ut={key:0,class:"empty-state"},dt=F(e({__name:"CalendarTimelineView",props:{events:{},currentDate:{}},emits:["event-click"],setup(e,{emit:t}){const a=e,i=l(()=>{const e=[],t=new Date(a.currentDate);t.setDate(1);const l=t.getFullYear(),n=t.getMonth(),s=new Date(l,n+1,0).getDate();for(let a=0;a<s;a++){const t=new Date(l,n,a+1);e.push(t)}return e}),r=l(()=>i.value[0]),p=l(()=>i.value[i.value.length-1]),m=l(()=>{const e=new Map;return a.events.filter(e=>{const t=new Date(e.start),a=new Date(e.end);return t<=p.value&&a>=r.value}).forEach(t=>{e.has(t.vessel)||e.set(t.vessel,[]),e.get(t.vessel).push(t)}),Array.from(e.entries()).map(([e,t])=>({name:e,events:t.sort((e,t)=>new Date(e.start).getTime()-new Date(t.start).getTime()),eventCount:t.length,totalCargo:t.reduce((e,t)=>e+(t.cargo||0),0)})).sort((e,t)=>e.name.localeCompare(t.name))});function h(e){const t=new Date;return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function y(e){return e.toLocaleDateString("en-US",{weekday:"short"})}function f(e){const t=new Date(e.start),a=new Date(e.end),l=t<r.value?r.value:t,n=a>p.value?p.value:a,s=i.value.length;return{left:Math.floor((l.getTime()-r.value.getTime())/864e5)/s*100+"%",width:(Math.ceil((n.getTime()-l.getTime())/864e5)+1)/s*100+"%"}}function b(e){return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}return(e,t)=>(d(),n("div",Je,[s("div",Ke,[t[0]||(t[0]=s("div",{class:"vessel-column-header"},"Vessel / Route",-1)),s("div",Xe,[(d(!0),n(c,null,u(i.value,e=>(d(),n("div",{key:e.toISOString(),class:g(["timeline-date",{today:h(e)}])},[s("div",Ze,v(e.getDate()),1),s("div",et,v(y(e)),1)],2))),128))])]),s("div",tt,[(d(!0),n(c,null,u(m.value,t=>{return d(),n("div",{key:t.name,class:"timeline-row"},[s("div",at,[s("div",lt,v(t.name),1),s("div",nt,v(t.eventCount)+" voyages â€¢ "+v((a=t.totalCargo,new Intl.NumberFormat("en-US",{maximumFractionDigits:0}).format(a)))+" MT ",1)]),s("div",st,[(d(!0),n(c,null,u(i.value,e=>(d(),n("div",{key:e.toISOString(),class:g(["timeline-cell",{today:h(e)}])},null,2))),128)),(d(!0),n(c,null,u(t.events,t=>(d(),n("div",{key:t.id,class:g(["timeline-event",`module-${t.module}`,`status-${t.status}`]),style:C(f(t)),onClick:a=>e.$emit("event-click",t)},[s("div",it,[s("div",rt,v(t.route),1),s("div",ct,v(b(t.start))+" - "+v(b(t.end)),1)])],14,ot))),128))])]);var a}),128)),0===m.value.length?(d(),n("div",ut,[...t[1]||(t[1]=[s("p",null,"No events found for the selected period",-1)])])):o("",!0)])]))}}),[["__scopeId","data-v-99a3467e"]]),vt={key:0,class:"status-icon"},pt={class:"status-text"},mt=F(e({__name:"StatusBadge",props:{status:{},label:{},variant:{default:"default"},showIcon:{type:Boolean,default:!1}},setup(e){const t=e,a={draft:{icon:"ðŸ“",color:"gray"},planned:{icon:"ðŸ“‹",color:"blue"},"in-progress":{icon:"ðŸš¢",color:"blue"},active:{icon:"âœ…",color:"green"},completed:{icon:"âœ”ï¸",color:"green"},cancelled:{icon:"âŒ",color:"red"},delayed:{icon:"â°",color:"yellow"},pending:{icon:"â³",color:"gray"},generating:{icon:"âš™ï¸",color:"blue"},failed:{icon:"âŒ",color:"red"},finalized:{icon:"ðŸ”’",color:"green"},archived:{icon:"ðŸ“¦",color:"gray"},low:{icon:"â„¹ï¸",color:"blue"},medium:{icon:"âš ï¸",color:"yellow"},high:{icon:"ðŸ”´",color:"orange"},critical:{icon:"ðŸ”¥",color:"red"},success:{icon:"âœ…",color:"green"},warning:{icon:"âš ï¸",color:"yellow"},error:{icon:"âŒ",color:"red"},info:{icon:"â„¹ï¸",color:"blue"}},i=l(()=>a[t.status.toLowerCase()]||{icon:"â€¢",color:"gray"}),r=l(()=>i.value.icon);return(t,a)=>(d(),n("span",{class:g(["status-badge",[`status-${e.status}`,`variant-${e.variant}`,{"with-icon":e.showIcon}]])},[e.showIcon?(d(),n("span",vt,v(r.value),1)):o("",!0),s("span",pt,v(e.label||e.status),1)],2))}}),[["__scopeId","data-v-d66c96e8"]]),gt={class:"event-modal-content"},ht={class:"event-header"},yt={class:"event-title-section"},ft={class:"event-title"},bt={class:"info-grid"},wt={class:"info-item"},Dt={class:"info-value"},kt={class:"info-item"},Ct={class:"info-value"},St={class:"info-item"},Vt={class:"info-value"},_t={class:"info-item"},Tt={class:"info-value"},xt={class:"info-item"},Mt={class:"info-value"},$t={class:"info-item"},Ft={class:"info-value"},Ut={class:"info-item"},Rt={class:"info-value"},Lt={class:"info-item"},Ot={class:"info-value"},It={key:0,class:"additional-details"},Ht={class:"details-grid"},Et={class:"detail-label"},Bt={class:"detail-value"},Yt={class:"timeline-visualization"},jt={class:"timeline-bar-container"},Pt={class:"timeline-bar-wrapper"},At={class:"timeline-start"},Nt={class:"timeline-duration"},zt={class:"timeline-end"},Wt={class:"modal-actions"},qt=F(e({__name:"EventModal",props:{event:{}},emits:["close"],setup(e,{emit:t}){const a=e,i=l(()=>({deepsea:"Deep Sea",olya:"Olya",balakovo:"Balakovo"}[a.event.module]||a.event.module)),r=l(()=>a.event.details&&Object.keys(a.event.details).length>0),p=l(()=>{if(!a.event.details)return{};const e=["id","voyage_id","vessel_id","vessel_name","start_date","end_date","laycan_start","laycan_end","qty_mt","total_cost_usd","cargo_type","cargo_name"],t={};return Object.entries(a.event.details).forEach(([a,l])=>{e.includes(a)||null==l||""===l||(t[a]=l)}),t});function m(e){return new Date(e).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function y(e){return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}function w(e){return new Intl.NumberFormat("en-US",{maximumFractionDigits:2}).format(e)}function k(){const e=new Date(a.event.start),t=new Date(a.event.end),l=Math.abs(t.getTime()-e.getTime());return Math.ceil(l/864e5)}function C(e){return e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function S(e){return"number"==typeof e?w(e):"boolean"==typeof e?e?"Yes":"No":e instanceof Date?m(e):String(e)}function V(){const e={"Voyage ID":a.event.id,Title:a.event.title,Vessel:a.event.vessel,Module:i.value,Route:a.event.route||"N/A",Status:a.event.status,"Start Date":m(a.event.start),"End Date":m(a.event.end),Duration:`${k()} days`,"Cargo (MT)":a.event.cargo||0,"Cost (USD)":a.event.cost||0,...p.value},t=Object.entries(e).map(([e,t])=>`${e}: ${t}`).join("\n"),l=new Blob([t],{type:"text/plain"}),n=URL.createObjectURL(l),s=document.createElement("a");s.href=n,s.download=`voyage-${a.event.id}-details.txt`,s.click(),URL.revokeObjectURL(n)}return(t,a)=>(d(),D($,{show:!0,title:"Voyage Details",size:"large",onClose:a[1]||(a[1]=e=>t.$emit("close"))},{default:f(()=>[s("div",gt,[s("div",ht,[s("div",yt,[s("h2",ft,v(e.event.title),1),h(mt,{status:e.event.status},null,8,["status"])]),s("div",{class:g(["event-module-badge",`module-${e.event.module}`])},v(i.value),3)]),s("div",bt,[s("div",wt,[a[2]||(a[2]=s("div",{class:"info-label"},"ðŸš¢ Vessel",-1)),s("div",Dt,v(e.event.vessel),1)]),s("div",kt,[a[3]||(a[3]=s("div",{class:"info-label"},"ðŸ—ºï¸ Route",-1)),s("div",Ct,v(e.event.route||"N/A"),1)]),s("div",St,[a[4]||(a[4]=s("div",{class:"info-label"},"ðŸ“… Start Date",-1)),s("div",Vt,v(m(e.event.start)),1)]),s("div",_t,[a[5]||(a[5]=s("div",{class:"info-label"},"ðŸ“… End Date",-1)),s("div",Tt,v(m(e.event.end)),1)]),s("div",xt,[a[6]||(a[6]=s("div",{class:"info-label"},"â±ï¸ Duration",-1)),s("div",Mt,v(k())+" days",1)]),s("div",$t,[a[7]||(a[7]=s("div",{class:"info-label"},"ðŸ“¦ Cargo",-1)),s("div",Ft,v(w(e.event.cargo||0))+" MT",1)]),s("div",Ut,[a[8]||(a[8]=s("div",{class:"info-label"},"ðŸ’° Cost",-1)),s("div",Rt,"$"+v(w(e.event.cost||0)),1)]),s("div",Lt,[a[9]||(a[9]=s("div",{class:"info-label"},"ðŸ“Š Module",-1)),s("div",Ot,v(i.value),1)])]),r.value?(d(),n("div",It,[a[10]||(a[10]=s("h3",{class:"section-title"},"Additional Details",-1)),s("div",Ht,[(d(!0),n(c,null,u(p.value,(e,t)=>(d(),n("div",{key:t,class:"detail-item"},[s("span",Et,v(C(t))+":",1),s("span",Bt,v(S(e)),1)]))),128))])])):o("",!0),s("div",Yt,[a[11]||(a[11]=s("h3",{class:"section-title"},"Timeline",-1)),s("div",jt,[s("div",Pt,[s("div",{class:g(["timeline-bar",`module-${e.event.module}`,`status-${e.event.status}`])},[s("span",At,v(y(e.event.start)),1),s("span",Nt,v(k())+" days",1),s("span",zt,v(y(e.event.end)),1)],2)])])]),s("div",Wt,[h(M,{variant:"secondary",onClick:V},{default:f(()=>[...a[12]||(a[12]=[b(" ðŸ“„ Export Details ",-1)])]),_:1}),h(M,{variant:"primary",onClick:a[0]||(a[0]=e=>t.$emit("close"))},{default:f(()=>[...a[13]||(a[13]=[b(" Close ",-1)])]),_:1})])])]),_:1}))}}),[["__scopeId","data-v-859007cc"]]),Gt={class:"operational-calendar-view"},Qt={class:"calendar-header"},Jt={class:"statistics-panel"},Kt={class:"stat-card"},Xt={class:"stat-content"},Zt={class:"stat-value"},ea={class:"stat-card"},ta={class:"stat-content"},aa={class:"stat-value"},la={class:"stat-card"},na={class:"stat-content"},sa={class:"stat-value"},oa={class:"stat-card"},ia={class:"stat-content"},ra={class:"stat-value"},ca={class:"export-actions"},ua={class:"calendar-controls"},da={class:"view-switcher"},va=["onClick"],pa={class:"view-icon"},ma={class:"view-label"},ga={class:"date-navigation"},ha={key:1,class:"error-message"},ya={key:2,class:"calendar-content"},fa=F(e({__name:"OperationalCalendarView",setup(e){const a=_(),{currentDate:i,viewType:r,loading:m,error:y,filteredEvents:w,statistics:C,uniqueVessels:V}=S(a),T=t(null),x=[{value:"month",label:"Month",icon:"ðŸ“…"},{value:"week",label:"Week",icon:"ðŸ“†"},{value:"year",label:"Year",icon:"ðŸ—“ï¸"},{value:"timeline",label:"Timeline",icon:"ðŸ“Š"}],$=l(()=>V.value.map(e=>({value:e,label:e}))),F=l(()=>[{value:"planned",label:"Planned"},{value:"in-progress",label:"In Progress"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}]),R=l(()=>{const e=i.value,t="year"===r.value?{year:"numeric"}:{year:"numeric",month:"long"};return e.toLocaleDateString("en-US",t)});function L(e){return new Intl.NumberFormat("en-US",{maximumFractionDigits:0}).format(e)}function O(){a.navigatePrevious()}function I(){a.navigateNext()}function H(){a.navigateToday()}function E(e){T.value=e}function B(e){const t=new Date(i.value);t.setMonth(e),a.setCurrentDate(t),a.setViewType("month")}function Y(){}async function j(){await a.fetchEvents()}function P(){const e=w.value.map(e=>[new Date(e.start).toLocaleDateString(),e.vessel,e.module,e.route||"",e.status,e.cargo?.toString()||"0",e.cost?.toString()||"0"]),t=[["Date","Vessel","Module","Route","Status","Cargo (MT)","Cost (USD)"].join(","),...e.map(e=>e.map(e=>`"${e}"`).join(","))].join("\n"),a=new Blob([t],{type:"text/csv"}),l=URL.createObjectURL(a),n=document.createElement("a");n.href=l,n.download=`calendar-export-${(new Date).toISOString().split("T")[0]}.csv`,n.click(),URL.revokeObjectURL(l)}function A(){const e=window.open("","_blank");if(!e)return;const t=w.value,a=C.value,l=`\n    <!DOCTYPE html>\n    <html>\n    <head>\n      <title>Operational Calendar Report</title>\n      <style>\n        body { font-family: Arial, sans-serif; padding: 20px; }\n        h1 { color: #333; }\n        .stats { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin: 20px 0; }\n        .stat { padding: 15px; background: #f5f5f5; border-radius: 5px; }\n        .stat-value { font-size: 24px; font-weight: bold; color: #0066cc; }\n        .stat-label { font-size: 12px; color: #666; margin-top: 5px; }\n        table { width: 100%; border-collapse: collapse; margin-top: 20px; }\n        th, td { padding: 10px; text-align: left; border-bottom: 1px solid #ddd; }\n        th { background: #0066cc; color: white; }\n        tr:hover { background: #f9f9f9; }\n        @media print { \n          button { display: none; }\n          .stats { page-break-inside: avoid; }\n        }\n      </style>\n    </head>\n    <body>\n      <h1>Operational Calendar Report</h1>\n      <p>Generated: ${(new Date).toLocaleString()}</p>\n      \n      <div class="stats">\n        <div class="stat">\n          <div class="stat-value">${a.activeVessels}</div>\n          <div class="stat-label">Active Vessels</div>\n        </div>\n        <div class="stat">\n          <div class="stat-value">${a.totalVoyages}</div>\n          <div class="stat-label">Total Voyages</div>\n        </div>\n        <div class="stat">\n          <div class="stat-value">${L(a.totalCargo)}</div>\n          <div class="stat-label">Total Cargo (MT)</div>\n        </div>\n        <div class="stat">\n          <div class="stat-value">$${L(a.totalCost)}</div>\n          <div class="stat-label">Total Cost (USD)</div>\n        </div>\n      </div>\n      \n      <table>\n        <thead>\n          <tr>\n            <th>Date</th>\n            <th>Vessel</th>\n            <th>Module</th>\n            <th>Route</th>\n            <th>Status</th>\n            <th>Cargo (MT)</th>\n            <th>Cost (USD)</th>\n          </tr>\n        </thead>\n        <tbody>\n          ${t.map(e=>`\n            <tr>\n              <td>${new Date(e.start).toLocaleDateString()}</td>\n              <td>${e.vessel}</td>\n              <td>${e.module}</td>\n              <td>${e.route||"-"}</td>\n              <td>${e.status}</td>\n              <td>${L(e.cargo||0)}</td>\n              <td>$${L(e.cost||0)}</td>\n            </tr>\n          `).join("")}\n        </tbody>\n      </table>\n      \n      <button onclick="window.print()" style="margin-top: 20px; padding: 10px 20px; background: #0066cc; color: white; border: none; border-radius: 5px; cursor: pointer;">\n        Print / Save as PDF\n      </button>\n    </body>\n    </html>\n  `;e.document.write(l),e.document.close()}return p(()=>{j()}),(e,t)=>(d(),n("div",Gt,[s("div",Qt,[t[11]||(t[11]=s("div",{class:"calendar-title"},[s("h1",null,"Operational Calendar"),s("p",{class:"subtitle"},"Vessel Schedule & Voyage Planning")],-1)),s("div",Jt,[s("div",Kt,[t[2]||(t[2]=s("div",{class:"stat-icon"},"ðŸš¢",-1)),s("div",Xt,[s("div",Zt,v(k(C).activeVessels),1),t[1]||(t[1]=s("div",{class:"stat-label"},"Active Vessels",-1))])]),s("div",ea,[t[4]||(t[4]=s("div",{class:"stat-icon"},"ðŸ“Š",-1)),s("div",ta,[s("div",aa,v(k(C).totalVoyages),1),t[3]||(t[3]=s("div",{class:"stat-label"},"Total Voyages",-1))])]),s("div",la,[t[6]||(t[6]=s("div",{class:"stat-icon"},"ðŸ“¦",-1)),s("div",na,[s("div",sa,v(L(k(C).totalCargo)),1),t[5]||(t[5]=s("div",{class:"stat-label"},"Total Cargo (MT)",-1))])]),s("div",oa,[t[8]||(t[8]=s("div",{class:"stat-icon"},"ðŸ’°",-1)),s("div",ia,[s("div",ra,"$"+v(L(k(C).totalCost)),1),t[7]||(t[7]=s("div",{class:"stat-label"},"Total Cost (USD)",-1))])])]),s("div",ca,[h(M,{variant:"secondary",size:"small",disabled:k(m),onClick:P},{default:f(()=>[...t[9]||(t[9]=[b(" ðŸ“„ Export CSV ",-1)])]),_:1},8,["disabled"]),h(M,{variant:"secondary",size:"small",disabled:k(m),onClick:A},{default:f(()=>[...t[10]||(t[10]=[b(" ðŸ“‘ Export PDF ",-1)])]),_:1},8,["disabled"])])]),h(de,{context:"calendar","vessel-options":$.value,"status-options":F.value,onFiltersChanged:Y},null,8,["vessel-options","status-options"]),s("div",ua,[s("div",da,[(d(),n(c,null,u(x,e=>s("button",{key:e.value,class:g(["view-btn",{active:k(r)===e.value}]),onClick:t=>{return l=e.value,void a.setViewType(l);var l}},[s("span",pa,v(e.icon),1),s("span",ma,v(e.label),1)],10,va)),64))]),s("div",ga,[h(M,{variant:"text",size:"small",onClick:O},{default:f(()=>[...t[12]||(t[12]=[b(" â—€ Previous ",-1)])]),_:1}),s("button",{class:"current-date-btn",onClick:H},v(R.value),1),h(M,{variant:"text",size:"small",onClick:I},{default:f(()=>[...t[13]||(t[13]=[b(" Next â–¶ ",-1)])]),_:1})])]),k(m)?(d(),D(U,{key:0,message:"Loading calendar events..."})):k(y)?(d(),n("div",ha,[s("p",null,"âš ï¸ "+v(k(y)),1),h(M,{variant:"primary",onClick:j},{default:f(()=>[...t[14]||(t[14]=[b("Retry",-1)])]),_:1})])):(d(),n("div",ya,["month"===k(r)?(d(),D(ke,{key:0,events:k(w),"current-date":k(i),onEventClick:E},null,8,["events","current-date"])):"week"===k(r)?(d(),D(Le,{key:1,events:k(w),"current-date":k(i),onEventClick:E},null,8,["events","current-date"])):"year"===k(r)?(d(),D(Qe,{key:2,events:k(w),"current-date":k(i),onEventClick:E,onMonthClick:B},null,8,["events","current-date"])):"timeline"===k(r)?(d(),D(dt,{key:3,events:k(w),"current-date":k(i),onEventClick:E},null,8,["events","current-date"])):o("",!0)])),T.value?(d(),D(qt,{key:3,event:T.value,onClose:t[0]||(t[0]=e=>T.value=null)},null,8,["event"])):o("",!0)]))}}),[["__scopeId","data-v-97190cf5"]]),ba=Object.freeze(Object.defineProperty({__proto__:null,default:fa},Symbol.toStringTag,{value:"Module"}));export{K as M,ba as O};
//# sourceMappingURL=view-operationalcalendarview-BHSgXeMG.js.map
