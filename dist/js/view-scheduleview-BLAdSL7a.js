import{d as e,r as a,c as t,g as s,a as l,b as n,e as i,B as o,n as u,t as c,F as d,i as v,h as r,C as g,o as m,E as y,z as h}from"./vendor-vue-CBmYbXPK.js";import{u as D,b as k}from"./stores-B-Lw8dsK.js";import{L as p,_ as w}from"./component-financial-CtXviO0A.js";import{c as f}from"./view-cargomanagement-BocXzYqp.js";import"./vendor-misc-DO6OT3jl.js";import"./services-DnyArwnx.js";import"./vendor-axios-CcrxTH1M.js";import"./vendor-charts-BEO-w-Hm.js";const b={class:"schedule-view"},S={class:"schedule-header"},C={class:"header-controls"},T={class:"view-toggle"},_={class:"current-period"},L={key:0,class:"calendar-grid"},M={class:"weekday-headers"},U={class:"calendar-days"},j=["onClick"],N={class:"day-number"},$={class:"day-events"},V=["onClick"],F={class:"event-title"},I={key:0,class:"more-events"},H={key:1,class:"week-view"},Y={class:"week-header"},E={class:"day-name"},P={class:"day-number"},x={class:"week-grid"},O={class:"time-column"},R={class:"week-columns"},W={class:"events-overlay"},z=["onClick"],A={key:2,class:"list-view"},B={key:0,class:"loading-state"},q={key:1,class:"empty-state"},G={key:2,class:"events-list"},J={class:"group-header"},K={class:"event-count"},Q={class:"group-events"},X=["onClick"],Z={class:"event-icon"},ee={class:"event-info"},ae={class:"event-name"},te={class:"event-meta"},se={class:"event-status"},le={key:0},ne={key:1},ie={class:"event-time"},oe={class:"event-details"},ue={class:"detail-row"},ce={class:"detail-value"},de={class:"detail-row"},ve={class:"detail-value"},re={class:"detail-row"},ge={class:"detail-value"},me={key:0,class:"detail-row"},ye={class:"detail-value"},he={key:1,class:"detail-row"},De={class:"detail-value"},ke={key:2,class:"detail-row"},pe={class:"detail-value"},we={key:3,class:"legs-section"},fe={class:"legs-list"},be={class:"leg-number"},Se={class:"leg-type"},Ce={class:"leg-route"},Te={key:0,class:"leg-distance"},_e=w(e({__name:"ScheduleView",setup(e){const w=h(),_e=D(),Le=k(),Me=a("month"),Ue=a(new Date),je=a(null),Ne=a(null),$e=a(!1),Ve=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Fe=t(()=>{if("month"===Me.value)return Ue.value.toLocaleDateString("en-US",{month:"long",year:"numeric"});if("week"===Me.value){const e=Ee(Ue.value),a=new Date(e);return a.setDate(a.getDate()+6),`${e.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${a.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`}return Ue.value.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),Ie=t(()=>{const e=Ue.value.getFullYear(),a=Ue.value.getMonth(),t=new Date(e,a,1),s=new Date(e,a+1,0),l=new Date(t);l.setDate(l.getDate()-t.getDay());const n=new Date(s);n.setDate(n.getDate()+(6-s.getDay()));const i=[],o=new Date(l);for(;o<=n;){const e=o.toISOString().split("T")[0],t=new Date;t.setHours(0,0,0,0),i.push({date:e,dayNumber:o.getDate(),isCurrentMonth:o.getMonth()===a,isToday:o.toDateString()===t.toDateString()}),o.setDate(o.getDate()+1)}return i}),He=t(()=>{const e=Ee(Ue.value),a=[];for(let t=0;t<7;t++){const s=new Date(e);s.setDate(s.getDate()+t);const l=new Date;l.setHours(0,0,0,0),a.push({date:s.toISOString().split("T")[0],dayName:s.toLocaleDateString("en-US",{weekday:"short"}),dayNumber:s.getDate(),isToday:s.toDateString()===l.toDateString()})}return a}),Ye=t(()=>{const e=_e.voyages,a=new Map;return e.forEach(e=>{if(e.startDate){const t=e.startDate.split("T")[0];a.has(t)||a.set(t,[]),a.get(t).push(e)}}),Array.from(a.entries()).map(([e,a])=>({date:e,events:a})).sort((e,a)=>e.date.localeCompare(a.date))});function Ee(e){const a=new Date(e),t=a.getDay(),s=a.getDate()-t;return new Date(a.setDate(s))}function Pe(){if("month"===Me.value)Ue.value=new Date(Ue.value.getFullYear(),Ue.value.getMonth()-1,1);else if("week"===Me.value){const e=new Date(Ue.value);e.setDate(e.getDate()-7),Ue.value=e}}function xe(){if("month"===Me.value)Ue.value=new Date(Ue.value.getFullYear(),Ue.value.getMonth()+1,1);else if("week"===Me.value){const e=new Date(Ue.value);e.setDate(e.getDate()+7),Ue.value=e}}function Oe(){Ue.value=new Date}function Re(e){return We(e).length>0}function We(e){return _e.voyages.filter(a=>!!a.startDate&&a.startDate.split("T")[0]===e)}function ze(e){Ne.value=e}function Ae(e){if(!e)return"Unknown";const a=Le.vessels.find(a=>a.id===e);return a?a.name:"Unknown"}function Be(e){const a=new Date(e),t=new Date;t.setHours(0,0,0,0);const s=new Date(a);s.setHours(0,0,0,0);const l=s.getTime()-t.getTime(),n=Math.floor(l/864e5);return 0===n?"Today":1===n?"Tomorrow":-1===n?"Yesterday":a.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}return s(async()=>{$e.value=!0;try{await Promise.all([_e.fetchVoyages(),Le.fetchVessels()])}finally{$e.value=!1}}),(e,a)=>(m(),l("div",b,[n("div",S,[a[6]||(a[6]=n("h1",null,"Schedule & Calendar",-1)),n("div",C,[n("div",T,[n("button",{class:u({active:"month"===Me.value}),onClick:a[0]||(a[0]=e=>Me.value="month")}," Month ",2),n("button",{class:u({active:"week"===Me.value}),onClick:a[1]||(a[1]=e=>Me.value="week")}," Week ",2),n("button",{class:u({active:"list"===Me.value}),onClick:a[2]||(a[2]=e=>Me.value="list")}," List ",2)]),n("div",{class:"calendar-navigation"},[n("button",{onClick:Pe,class:"nav-btn"},"â€¹"),n("button",{onClick:Oe,class:"today-btn"},"Today"),n("button",{onClick:xe,class:"nav-btn"},"â€º")]),n("div",_,[n("h2",null,c(Fe.value),1)])])]),"month"===Me.value?(m(),l("div",L,[n("div",M,[(m(),l(d,null,v(Ve,e=>n("div",{key:e,class:"weekday-header"},c(e),1)),64))]),n("div",U,[(m(!0),l(d,null,v(Ie.value,e=>{return m(),l("div",{key:e.date,class:u(["calendar-day",{"other-month":!e.isCurrentMonth,today:e.isToday,selected:(t=e.date,je.value===t),"has-events":Re(e.date)}]),onClick:a=>function(e){je.value=e===je.value?null:e}(e.date)},[n("div",N,c(e.dayNumber),1),n("div",$,[(m(!0),l(d,null,v(We(e.date).slice(0,3),e=>(m(),l("div",{key:e.id,class:u(["event-item",`event-${e.status}`]),onClick:y(a=>ze(e),["stop"])},[a[7]||(a[7]=n("div",{class:"event-dot"},null,-1)),n("div",F,c(e.vessel_name||e.id),1)],10,V))),128)),We(e.date).length>3?(m(),l("div",I," +"+c(We(e.date).length-3)+" more ",1)):i("",!0)])],10,j);var t}),128))])])):i("",!0),"week"===Me.value?(m(),l("div",H,[n("div",Y,[a[8]||(a[8]=n("div",{class:"time-column-header"},"Time",-1)),(m(!0),l(d,null,v(He.value,e=>(m(),l("div",{key:e.date,class:u(["week-day-header",{today:e.isToday}])},[n("div",E,c(e.dayName),1),n("div",P,c(e.dayNumber),1)],2))),128))]),n("div",x,[n("div",O,[(m(),l(d,null,v(24,e=>n("div",{key:e,class:"time-slot"},c(e.toString().padStart(2,"0"))+":00 ",1)),64))]),n("div",R,[(m(!0),l(d,null,v(He.value,e=>(m(),l("div",{key:e.date,class:"week-day-column"},[(m(),l(d,null,v(24,e=>n("div",{key:e,class:"time-slot-cell"})),64)),n("div",W,[(m(!0),l(d,null,v(We(e.date),e=>(m(),l("div",{key:e.id,class:u(["week-event",`event-${e.status}`]),onClick:a=>ze(e)},c(e.vessel_name||e.id),11,z))),128))])]))),128))])])])):i("",!0),"list"===Me.value?(m(),l("div",A,[$e.value?(m(),l("div",B,[r(p)])):0===Ye.value.length?(m(),l("div",q,[...a[9]||(a[9]=[n("p",null,"No scheduled voyages found",-1)])])):(m(),l("div",G,[(m(!0),l(d,null,v(Ye.value,e=>(m(),l("div",{key:e.date,class:"event-group"},[n("div",J,[n("h3",null,c(Be(e.date)),1),n("span",K,c(e.events.length)+" voyage"+c(e.events.length>1?"s":""),1)]),n("div",Q,[(m(!0),l(d,null,v(e.events,e=>{return m(),l("div",{key:e.id,class:u(["list-event-item",`status-${e.status}`]),onClick:a=>ze(e)},[n("div",Z,c((t=e.status,{planned:"ðŸ“‹",active:"ðŸš¢",completed:"âœ…",cancelled:"âŒ"}[t]||"ðŸ“")),1),n("div",ee,[n("div",ae,c(e.vessel_name||"Vessel"),1),n("div",te,[n("span",se,c(e.status),1),e.route_name?(m(),l("span",le,"â€¢ "+c(e.route_name),1)):i("",!0),e.legs&&e.legs.length?(m(),l("span",ne,"â€¢ "+c(e.legs.length)+" legs",1)):i("",!0)])]),n("div",ie,c((a=e.startDate,a?new Date(a).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"")),1)],10,X);var a,t}),128))])]))),128))]))])):i("",!0),Ne.value?(m(),o(f,{key:3,onClose:a[5]||(a[5]=e=>Ne.value=null)},{header:g(()=>[...a[10]||(a[10]=[n("h3",null,"Voyage Details",-1)])]),body:g(()=>{return[n("div",oe,[n("div",ue,[a[11]||(a[11]=n("span",{class:"detail-label"},"ID:",-1)),n("span",ce,c(Ne.value.id),1)]),n("div",de,[a[12]||(a[12]=n("span",{class:"detail-label"},"Vessel:",-1)),n("span",ve,c(Ne.value.vessel_name||Ae(Ne.value.vesselId)),1)]),n("div",re,[a[13]||(a[13]=n("span",{class:"detail-label"},"Status:",-1)),n("span",ge,[n("span",{class:u(`status-badge status-${Ne.value.status}`)},c(Ne.value.status),3)])]),Ne.value.startDate?(m(),l("div",me,[a[14]||(a[14]=n("span",{class:"detail-label"},"Start Date:",-1)),n("span",ye,c((e=Ne.value.startDate,new Date(e).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}))),1)])):i("",!0),Ne.value.route_name?(m(),l("div",he,[a[15]||(a[15]=n("span",{class:"detail-label"},"Route:",-1)),n("span",De,c(Ne.value.route_name),1)])):i("",!0),Ne.value.legs&&Ne.value.legs.length?(m(),l("div",ke,[a[16]||(a[16]=n("span",{class:"detail-label"},"Total Legs:",-1)),n("span",pe,c(Ne.value.legs.length),1)])):i("",!0),Ne.value.legs&&Ne.value.legs.length?(m(),l("div",we,[a[17]||(a[17]=n("h4",null,"Route Legs",-1)),n("div",fe,[(m(!0),l(d,null,v(Ne.value.legs,(e,a)=>(m(),l("div",{key:a,class:"leg-item"},[n("span",be,c(a+1),1),n("span",Se,c(e.type),1),n("span",Ce,c(e.from||"Port")+" â†’ "+c(e.to||"Port"),1),e.distance?(m(),l("span",Te,c(e.distance)+" nm",1)):i("",!0)]))),128))])])):i("",!0)])];var e}),footer:g(()=>[n("button",{onClick:a[3]||(a[3]=e=>Ne.value=null),class:"btn btn-secondary"},"Close"),n("button",{onClick:a[4]||(a[4]=e=>{return a=Ne.value,void w.push(`/voyages/${a.id}/edit`);var a}),class:"btn btn-primary"},"Edit")]),_:1})):i("",!0)]))}}),[["__scopeId","data-v-7f6a56dc"]]);export{_e as default};
//# sourceMappingURL=view-scheduleview-BLAdSL7a.js.map
