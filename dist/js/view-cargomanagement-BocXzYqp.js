import{a as e}from"./stores-B-Lw8dsK.js";import{d as a,c as t,a as l,n as o,e as s,b as r,q as i,t as n,F as d,i as u,o as c,A as m,w as v,B as p,T as f,h as y,C as h,D as b,r as g,k as C,v as _,E as k,s as V,g as q,G as P}from"./vendor-vue-CBmYbXPK.js";import{_ as w,L as S}from"./component-financial-CtXviO0A.js";const A=["for"],D={key:0,class:"base-select__required"},T={class:"base-select__wrapper"},E=["id","value","disabled","required"],x={key:0,value:"",disabled:""},U=["value"],$={key:1,class:"base-select__error-message"},B={key:2,class:"base-select__hint"},L=w(a({__name:"BaseSelect",props:{modelValue:{},options:{},label:{},placeholder:{},hint:{},error:{},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},valueKey:{default:"value"},labelKey:{default:"label"}},emits:["update:modelValue","change"],setup(e,{emit:a}){const m=e,v=a,p=t(()=>`select-${Math.random().toString(36).substring(7)}`),f=e=>"object"==typeof e?e[m.valueKey]:e,y=e=>{const a=e.target.value;v("update:modelValue",a),v("change",a)};return(a,t)=>(c(),l("div",{class:o(["base-select",{"base-select--error":e.error}])},[e.label?(c(),l("label",{key:0,for:p.value,class:"base-select__label"},[i(n(e.label)+" ",1),e.required?(c(),l("span",D,"*")):s("",!0)],8,A)):s("",!0),r("div",T,[r("select",{id:p.value,value:e.modelValue,disabled:e.disabled,required:e.required,class:"base-select__field",onChange:y},[e.placeholder?(c(),l("option",x,n(e.placeholder),1)):s("",!0),(c(!0),l(d,null,u(e.options,e=>(c(),l("option",{key:f(e),value:f(e)},n((e=>"object"==typeof e?e[m.labelKey]:String(e))(e)),9,U))),128))],40,E),t[0]||(t[0]=r("span",{class:"base-select__arrow"},"â–¼",-1))]),e.error?(c(),l("span",$,n(e.error),1)):e.hint?(c(),l("span",B,n(e.hint),1)):s("",!0)],2))}}),[["__scopeId","data-v-9ff05a9b"]]),R=["for"],I={key:0,class:"base-input__required"},M={class:"base-input__wrapper"},O={key:0,class:"base-input__prefix"},F=["id","type","value","placeholder","disabled","readonly","required","min","max","step"],N={key:1,class:"base-input__suffix"},j={key:1,class:"base-input__error-message"},z={key:2,class:"base-input__hint"},Q=w(a({__name:"BaseInput",props:{modelValue:{},type:{default:"text"},label:{},placeholder:{},hint:{},error:{},prefix:{},suffix:{},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},required:{type:Boolean,default:!1},min:{},max:{},step:{}},emits:["update:modelValue","blur","focus"],setup(e,{emit:a}){const d=e,u=a,m=t(()=>`input-${Math.random().toString(36).substring(7)}`),v=e=>{const a=e.target,t="number"===d.type?Number(a.value):a.value;u("update:modelValue",t)},p=()=>{u("blur")},f=()=>{u("focus")};return(a,t)=>(c(),l("div",{class:o(["base-input",{"base-input--error":e.error}])},[e.label?(c(),l("label",{key:0,for:m.value,class:"base-input__label"},[i(n(e.label)+" ",1),e.required?(c(),l("span",I,"*")):s("",!0)],8,R)):s("",!0),r("div",M,[e.prefix?(c(),l("span",O,n(e.prefix),1)):s("",!0),r("input",{id:m.value,type:e.type,value:e.modelValue,placeholder:e.placeholder,disabled:e.disabled,readonly:e.readonly,required:e.required,min:e.min,max:e.max,step:e.step,class:"base-input__field",onInput:v,onBlur:p,onFocus:f},null,40,F),e.suffix?(c(),l("span",N,n(e.suffix),1)):s("",!0)]),e.error?(c(),l("span",j,n(e.error),1)):e.hint?(c(),l("span",z,n(e.hint),1)):s("",!0)],2))}}),[["__scopeId","data-v-6c1101e7"]]),K=["type","disabled"],W={key:0,class:"button__spinner"},G={key:1,class:"button__icon"},Y={key:2,class:"button__text"},H=w(a({__name:"BaseButton",props:{type:{default:"button"},variant:{default:"primary"},size:{default:"medium"},icon:{},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},fullWidth:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:a}){const r=e,i=a,d=t(()=>["base-button",`base-button--${r.variant}`,`base-button--${r.size}`,{"base-button--loading":r.loading,"base-button--disabled":r.disabled,"base-button--full-width":r.fullWidth}]),u=e=>{r.disabled||r.loading||i("click",e)};return(a,t)=>(c(),l("button",{type:e.type,class:o(d.value),disabled:e.disabled||e.loading,onClick:u},[e.loading?(c(),l("span",W)):s("",!0),e.icon&&!e.loading?(c(),l("span",G,n(e.icon),1)):s("",!0),a.$slots.default?(c(),l("span",Y,[m(a.$slots,"default",{},void 0,!0)])):s("",!0)],10,K))}}),[["__scopeId","data-v-e716d425"]]),J={class:"modal__header"},X={class:"modal__title"},Z={class:"modal__body"},ee={key:0,class:"modal__footer"},ae={key:1,class:"modal__footer"},te=w(a({__name:"BaseModal",props:{modelValue:{type:Boolean},title:{default:""},size:{default:"medium"},closable:{type:Boolean,default:!0},closeOnOverlay:{type:Boolean,default:!0},showDefaultFooter:{type:Boolean,default:!1},confirmText:{default:"Confirm"},cancelText:{default:"Cancel"}},emits:["update:modelValue","close","confirm"],setup(e,{emit:a}){const d=e,u=a,g=t(()=>[`modal--${d.size}`]),C=()=>{u("update:modelValue",!1),u("close")},_=()=>{u("confirm")},k=e=>{d.closeOnOverlay&&e.target===e.currentTarget&&C()};return v(()=>d.modelValue,e=>{document.body.style.overflow=e?"hidden":""}),(a,t)=>(c(),p(f,{to:"body"},[y(b,{name:"modal"},{default:h(()=>[e.modelValue?(c(),l("div",{key:0,class:"modal-overlay",onClick:k},[r("div",{class:o(["modal",g.value]),role:"dialog","aria-modal":"true"},[r("div",J,[r("h2",X,n(e.title),1),e.closable?(c(),l("button",{key:0,class:"modal__close",type:"button","aria-label":"Close",onClick:C}," âœ• ")):s("",!0)]),r("div",Z,[m(a.$slots,"default",{},void 0,!0)]),a.$slots.footer?(c(),l("div",ee,[m(a.$slots,"footer",{},void 0,!0)])):e.showDefaultFooter?(c(),l("div",ae,[y(H,{variant:"ghost",onClick:C},{default:h(()=>[i(n(e.cancelText),1)]),_:1}),y(H,{variant:"primary",onClick:_},{default:h(()=>[i(n(e.confirmText),1)]),_:1})])):s("",!0)],2)])):s("",!0)]),_:3})]))}}),[["__scopeId","data-v-c0ad664f"]]),le={class:"cargo-list"},oe={class:"filters-section"},se={class:"search-box"},re={class:"filters"},ie={key:1,class:"empty-state"},ne={key:2,class:"table-container"},de={class:"cargo-table"},ue={key:0,class:"sort-indicator"},ce={key:0,class:"sort-indicator"},me={key:0,class:"sort-indicator"},ve={key:0,class:"sort-indicator"},pe=["onClick"],fe={key:3,class:"pagination"},ye={class:"page-info"},he=w(a({__name:"CargoList",props:{cargo:{},loading:{type:Boolean,default:!1}},emits:["add-cargo","edit-cargo","delete-cargo","view-cargo"],setup(e,{emit:a}){const m=e,v=a,f=g(""),b=g(""),V=g(""),q=g("laycanStart"),P=g("asc"),w=g(1),A=[{value:"",label:"All Statuses"},{value:"Pending",label:"Pending"},{value:"Assigned",label:"Assigned"},{value:"Completed",label:"Completed"},{value:"Cancelled",label:"Cancelled"}],D=t(()=>{let e=[...m.cargo];if(f.value){const a=f.value.toLowerCase();e=e.filter(e=>e.id.toString().toLowerCase().includes(a)||e.commodity.toLowerCase().includes(a))}if(b.value&&(e=e.filter(e=>e.status===b.value)),V.value){const a=V.value.toLowerCase();e=e.filter(e=>e.loadPort.toLowerCase().includes(a)||e.dischPort.toLowerCase().includes(a))}return e.sort((e,a)=>{const t=e[q.value],l=a[q.value];if(t===l)return 0;const o=t<l?-1:1;return"asc"===P.value?o:-o}),e}),T=t(()=>Math.ceil(D.value.length/10)),E=t(()=>{const e=10*(w.value-1),a=e+10;return D.value.slice(e,a)});function x(e){q.value===e?P.value="asc"===P.value?"desc":"asc":(q.value=e,P.value="asc")}function U(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}return(a,t)=>(c(),l("div",le,[r("div",oe,[r("div",se,[C(r("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>f.value=e),type:"text",placeholder:"Search cargo by ID or commodity...",class:"search-input"},null,512),[[_,f.value]])]),r("div",re,[y(L,{modelValue:b.value,"onUpdate:modelValue":t[1]||(t[1]=e=>b.value=e),options:A,placeholder:"Filter by status",class:"filter-select"},null,8,["modelValue"]),C(r("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>V.value=e),type:"text",placeholder:"Filter by port...",class:"filter-input"},null,512),[[_,V.value]])]),y(H,{onClick:t[3]||(t[3]=e=>a.$emit("add-cargo")),variant:"primary",class:"add-button"},{default:h(()=>[...t[11]||(t[11]=[r("span",{class:"icon"},"+",-1),i(" Add Cargo ",-1)])]),_:1})]),e.loading?(c(),p(S,{key:0})):0===D.value.length?(c(),l("div",ie,[...t[12]||(t[12]=[r("p",null,"No cargo commitments found.",-1)])])):(c(),l("div",ne,[r("table",de,[r("thead",null,[r("tr",null,[r("th",{onClick:t[4]||(t[4]=e=>x("id"))},[t[13]||(t[13]=i(" ID ",-1)),"id"===q.value?(c(),l("span",ue,n("asc"===P.value?"â†‘":"â†“"),1)):s("",!0)]),r("th",{onClick:t[5]||(t[5]=e=>x("commodity"))},[t[14]||(t[14]=i(" Commodity ",-1)),"commodity"===q.value?(c(),l("span",ce,n("asc"===P.value?"â†‘":"â†“"),1)):s("",!0)]),r("th",{onClick:t[6]||(t[6]=e=>x("quantity"))},[t[15]||(t[15]=i(" Quantity (MT) ",-1)),"quantity"===q.value?(c(),l("span",me,n("asc"===P.value?"â†‘":"â†“"),1)):s("",!0)]),t[17]||(t[17]=r("th",null,"Load Port",-1)),t[18]||(t[18]=r("th",null,"Discharge Port",-1)),r("th",{onClick:t[7]||(t[7]=e=>x("laycanStart"))},[t[16]||(t[16]=i(" Laycan Start ",-1)),"laycanStart"===q.value?(c(),l("span",ve,n("asc"===P.value?"â†‘":"â†“"),1)):s("",!0)]),t[19]||(t[19]=r("th",null,"Laycan End",-1)),t[20]||(t[20]=r("th",null,"Status",-1)),t[21]||(t[21]=r("th",null,"Actions",-1))])]),r("tbody",null,[(c(!0),l(d,null,u(E.value,e=>{return c(),l("tr",{key:e.id,onClick:t=>a.$emit("view-cargo",e),class:"cargo-row"},[r("td",null,n(e.id),1),r("td",null,[r("strong",null,n(e.commodity),1)]),r("td",null,n((s=e.quantity,s.toLocaleString())),1),r("td",null,n(e.loadPort),1),r("td",null,n(e.dischPort),1),r("td",null,n(U(e.laycanStart)),1),r("td",null,n(U(e.laycanEnd)),1),r("td",null,[r("span",{class:o(["status-badge",`status-${e.status.toLowerCase()}`])},n(e.status),3)]),r("td",{class:"actions-cell",onClick:t[8]||(t[8]=k(()=>{},["stop"]))},[y(H,{onClick:t=>a.$emit("edit-cargo",e),variant:"secondary",size:"small"},{default:h(()=>[...t[22]||(t[22]=[i(" Edit ",-1)])]),_:1},8,["onClick"]),y(H,{onClick:a=>function(e){confirm(`Delete cargo commitment ${e.id}? This action cannot be undone.`)&&v("delete-cargo",e)}(e),variant:"danger",size:"small"},{default:h(()=>[...t[23]||(t[23]=[i(" Delete ",-1)])]),_:1},8,["onClick"])])],8,pe);var s}),128))])])])),T.value>1?(c(),l("div",fe,[y(H,{onClick:t[9]||(t[9]=e=>w.value--),disabled:1===w.value,variant:"secondary",size:"small"},{default:h(()=>[...t[24]||(t[24]=[i(" Previous ",-1)])]),_:1},8,["disabled"]),r("span",ye," Page "+n(w.value)+" of "+n(T.value),1),y(H,{onClick:t[10]||(t[10]=e=>w.value++),disabled:w.value===T.value,variant:"secondary",size:"small"},{default:h(()=>[...t[25]||(t[25]=[i(" Next ",-1)])]),_:1},8,["disabled"])])):s("",!0)]))}}),[["__scopeId","data-v-5d9c14ac"]]),be={class:"cargo-template-list"},ge={class:"list-header"},Ce={key:1,class:"error-state"},_e={class:"error-message"},ke={key:2,class:"empty-state"},Ve={key:3,class:"template-grid"},qe={class:"card-header"},Pe={class:"template-info"},we={class:"template-name"},Se={key:0,class:"default-badge"},Ae={class:"card-actions"},De=["onClick"],Te=["onClick"],Ee={key:0,class:"template-description"},xe={class:"template-details"},Ue={class:"detail-item"},$e={class:"detail-value"},Be={key:0,class:"detail-item"},Le={class:"detail-value"},Re={key:1,class:"detail-item"},Ie={class:"detail-value"},Me={key:2,class:"detail-item"},Oe={class:"detail-value"},Fe={key:3,class:"detail-item"},Ne={class:"detail-value cost-highlight"},je={class:"card-footer"},ze={class:"card-meta"},Qe=w(a({__name:"CargoTemplateList",props:{templates:{},loading:{type:Boolean,default:!1},error:{default:null}},emits:["create","edit","delete","apply","retry"],setup(e){function a(e){return new Intl.NumberFormat("en-US",{maximumFractionDigits:2}).format(e)}function t(e){return!!(e.operationalCost||e.overheadCost||e.otherCost)}function m(e){return(e.operationalCost||0)+(e.overheadCost||0)+(e.otherCost||0)}return(v,f)=>(c(),l("div",be,[r("div",ge,[f[4]||(f[4]=r("h2",{class:"list-title"},"Cargo Templates",-1)),y(H,{variant:"primary",onClick:f[0]||(f[0]=e=>v.$emit("create"))},{default:h(()=>[...f[3]||(f[3]=[i(" + New Template ",-1)])]),_:1})]),e.loading?(c(),p(S,{key:0,message:"Loading templates..."})):e.error?(c(),l("div",Ce,[r("p",_e,"âš ï¸ "+n(e.error),1),y(H,{variant:"primary",onClick:f[1]||(f[1]=e=>v.$emit("retry"))},{default:h(()=>[...f[5]||(f[5]=[i(" Retry ",-1)])]),_:1})])):0===e.templates.length?(c(),l("div",ke,[f[7]||(f[7]=r("div",{class:"empty-icon"},"ðŸ“¦",-1)),f[8]||(f[8]=r("h3",null,"No Templates Yet",-1)),f[9]||(f[9]=r("p",null,"Create your first cargo template to streamline cargo creation with predefined cost structures.",-1)),y(H,{variant:"primary",onClick:f[2]||(f[2]=e=>v.$emit("create"))},{default:h(()=>[...f[6]||(f[6]=[i(" Create First Template ",-1)])]),_:1})])):(c(),l("div",Ve,[(c(!0),l(d,null,u(e.templates,e=>{return c(),l("div",{key:e.id,class:o(["template-card",{"is-default":e.isDefault}])},[r("div",qe,[r("div",Pe,[r("h3",we,n(e.name),1),e.isDefault?(c(),l("span",Se,"Default")):s("",!0)]),r("div",Ae,[r("button",{class:"icon-button",title:"Edit template",onClick:a=>v.$emit("edit",e)}," âœï¸ ",8,De),r("button",{class:"icon-button delete-button",title:"Delete template",onClick:a=>v.$emit("delete",e)}," ðŸ—‘ï¸ ",8,Te)])]),e.description?(c(),l("p",Ee,n(e.description),1)):s("",!0),r("div",xe,[r("div",Ue,[f[10]||(f[10]=r("span",{class:"detail-label"},"Commodity:",-1)),r("span",$e,n(e.commodity),1)]),e.quantity?(c(),l("div",Be,[f[11]||(f[11]=r("span",{class:"detail-label"},"Quantity:",-1)),r("span",Le,n(a(e.quantity))+" MT",1)])):s("",!0),e.freightRate?(c(),l("div",Re,[f[12]||(f[12]=r("span",{class:"detail-label"},"Freight Rate:",-1)),r("span",Ie,"$"+n(a(e.freightRate))+"/MT",1)])):s("",!0),e.loadPort||e.dischPort?(c(),l("div",Me,[f[13]||(f[13]=r("span",{class:"detail-label"},"Route:",-1)),r("span",Oe,n(e.loadPort||"Any")+" â†’ "+n(e.dischPort||"Any"),1)])):s("",!0),t(e)?(c(),l("div",Fe,[f[14]||(f[14]=r("span",{class:"detail-label"},"Total Cost:",-1)),r("span",Ne," $"+n(a(m(e))),1)])):s("",!0)]),r("div",je,[y(H,{variant:"secondary",size:"small",onClick:a=>v.$emit("apply",e)},{default:h(()=>[...f[15]||(f[15]=[i(" Apply Template ",-1)])]),_:1},8,["onClick"]),r("span",ze," Created: "+n((d=e.createdAt,d?new Date(d).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A")),1)])],2);var d}),128))]))]))}}),[["__scopeId","data-v-de47ff22"]]),Ke={class:"cost-allocation-fields"},We={class:"cost-inputs"},Ge={class:"form-group"},Ye={key:0,class:"error-message"},He={class:"form-group"},Je={key:0,class:"error-message"},Xe={class:"form-group"},Ze={key:0,class:"error-message"},ea={class:"total-cost-display"},aa=w(a({__name:"CostAllocationFields",props:{modelValue:{default:null},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","validation-change"],setup(e,{expose:a,emit:i}){const d=e,u=i,m=g({operationalCost:0,overheadCost:0,otherCost:0,totalCost:0}),p=g({}),f=t(()=>(Number(m.value.operationalCost)||0)+(Number(m.value.overheadCost)||0)+(Number(m.value.otherCost)||0)),h=t(()=>0===Object.keys(p.value).length&&m.value.operationalCost>=0&&m.value.overheadCost>=0&&m.value.otherCost>=0);function b(){C(),_()}function C(){p.value={};let e=!0;return m.value.operationalCost<0&&(p.value.operationalCost="Operational cost cannot be negative",e=!1),m.value.overheadCost<0&&(p.value.overheadCost="Overhead cost cannot be negative",e=!1),m.value.otherCost<0&&(p.value.otherCost="Other cost cannot be negative",e=!1),e}function _(){u("update:modelValue",{...m.value})}function k(){m.value={operationalCost:0,overheadCost:0,otherCost:0,totalCost:0},p.value={}}return v(()=>d.modelValue,e=>{e?m.value={operationalCost:e.operationalCost||0,overheadCost:e.overheadCost||0,otherCost:e.otherCost||0,totalCost:e.totalCost||0}:k()},{immediate:!0}),v(f,e=>{m.value.totalCost=e,_()}),v(h,e=>{u("validation-change",e)}),a({validateCosts:C,resetCosts:k}),(e,a)=>{return c(),l("div",Ke,[a[7]||(a[7]=r("div",{class:"section-header"},[r("h3",{class:"section-title"},"Cost Allocation"),r("p",{class:"section-description"},"Enter cost breakdown for this cargo commitment")],-1)),r("div",We,[r("div",Ge,[a[3]||(a[3]=r("label",{for:"operational-cost",class:"form-label"}," Operational Cost ($) ",-1)),y(Q,{id:"operational-cost",modelValue:m.value.operationalCost,"onUpdate:modelValue":a[0]||(a[0]=e=>m.value.operationalCost=e),modelModifiers:{number:!0},type:"number",min:"0",step:"0.01",placeholder:"0.00",error:p.value.operationalCost,onInput:b},null,8,["modelValue","error"]),p.value.operationalCost?(c(),l("span",Ye,n(p.value.operationalCost),1)):s("",!0)]),r("div",He,[a[4]||(a[4]=r("label",{for:"overhead-cost",class:"form-label"}," Overhead Cost ($) ",-1)),y(Q,{id:"overhead-cost",modelValue:m.value.overheadCost,"onUpdate:modelValue":a[1]||(a[1]=e=>m.value.overheadCost=e),modelModifiers:{number:!0},type:"number",min:"0",step:"0.01",placeholder:"0.00",error:p.value.overheadCost,onInput:b},null,8,["modelValue","error"]),p.value.overheadCost?(c(),l("span",Je,n(p.value.overheadCost),1)):s("",!0)]),r("div",Xe,[a[5]||(a[5]=r("label",{for:"other-cost",class:"form-label"}," Other Cost ($) ",-1)),y(Q,{id:"other-cost",modelValue:m.value.otherCost,"onUpdate:modelValue":a[2]||(a[2]=e=>m.value.otherCost=e),modelModifiers:{number:!0},type:"number",min:"0",step:"0.01",placeholder:"0.00",error:p.value.otherCost,onInput:b},null,8,["modelValue","error"]),p.value.otherCost?(c(),l("span",Ze,n(p.value.otherCost),1)):s("",!0)])]),r("div",ea,[a[6]||(a[6]=r("div",{class:"total-cost-label"},[r("strong",null,"Total Cost:")],-1)),r("div",{class:o(["total-cost-value",{"has-value":f.value>0}])}," $"+n((t=f.value,new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(t))),3)])]);var t}}}),[["__scopeId","data-v-8aa5439f"]]),ta={class:"form-section"},la={class:"form-group"},oa={class:"form-group"},sa={class:"form-section"},ra={class:"form-group"},ia={class:"form-row"},na={class:"form-group"},da={class:"form-group"},ua={class:"form-section"},ca={class:"form-row"},ma={class:"form-group"},va={class:"form-group"},pa={class:"form-section"},fa={class:"form-section"},ya={class:"form-group"},ha={class:"checkbox-label"},ba={class:"form-actions"},ga=w(a({__name:"CargoTemplateForm",props:{show:{type:Boolean},template:{default:null},submitting:{type:Boolean,default:!1}},emits:["close","submit"],setup(e,{emit:a}){const l=e,o=a,s=t(()=>!!l.template),d=g({name:"",description:"",commodity:"",quantity:void 0,loadPort:"",dischPort:"",freightRate:void 0,costAllocation:void 0,isDefault:!1}),u=g({}),m=g(!0),f=t(()=>""!==d.value.name.trim()&&""!==d.value.commodity.trim()&&0===Object.keys(u.value).length&&m.value);function b(){d.value={name:"",description:"",commodity:"",quantity:void 0,loadPort:"",dischPort:"",freightRate:void 0,costAllocation:void 0,isDefault:!1},u.value={},m.value=!0}function q(e){m.value=e}function P(){if(!function(){u.value={};let e=!0;return d.value.name.trim()||(u.value.name="Template name is required",e=!1),d.value.commodity.trim()||(u.value.commodity="Commodity is required",e=!1),void 0!==d.value.quantity&&d.value.quantity<0&&(u.value.quantity="Quantity cannot be negative",e=!1),void 0!==d.value.freightRate&&d.value.freightRate<0&&(u.value.freightRate="Freight rate cannot be negative",e=!1),e}())return;const e={...d.value};e.costAllocation&&(e.operationalCost=e.costAllocation.operationalCost,e.overheadCost=e.costAllocation.overheadCost,e.otherCost=e.costAllocation.otherCost),Object.keys(e).forEach(a=>{void 0!==e[a]&&""!==e[a]||delete e[a]}),o("submit",e)}function w(){b(),o("close")}return v(()=>l.template,e=>{e?d.value={name:e.name,description:e.description||"",commodity:e.commodity,quantity:e.quantity,loadPort:e.loadPort||"",dischPort:e.dischPort||"",freightRate:e.freightRate,costAllocation:void 0!==e.operationalCost?{operationalCost:e.operationalCost||0,overheadCost:e.overheadCost||0,otherCost:e.otherCost||0,totalCost:(e.operationalCost||0)+(e.overheadCost||0)+(e.otherCost||0)}:void 0,isDefault:e.isDefault||!1}:b(),u.value={}},{immediate:!0}),(a,t)=>(c(),p(te,{show:e.show,title:s.value?"Edit Cargo Template":"Create Cargo Template",size:"large",onClose:w},{default:h(()=>[r("form",{onSubmit:k(P,["prevent"]),class:"cargo-template-form"},[r("div",ta,[t[11]||(t[11]=r("h3",{class:"section-title"},"Template Information",-1)),r("div",la,[t[9]||(t[9]=r("label",{for:"template-name",class:"form-label"},[i(" Template Name "),r("span",{class:"required"},"*")],-1)),y(Q,{id:"template-name",modelValue:d.value.name,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value.name=e),placeholder:"e.g., Standard Container Cargo",required:"",error:u.value.name},null,8,["modelValue","error"])]),r("div",oa,[t[10]||(t[10]=r("label",{for:"description",class:"form-label"}," Description ",-1)),C(r("textarea",{id:"description","onUpdate:modelValue":t[1]||(t[1]=e=>d.value.description=e),class:"form-textarea",rows:"3",placeholder:"Enter template description..."},null,512),[[_,d.value.description]])])]),r("div",sa,[t[15]||(t[15]=r("h3",{class:"section-title"},"Cargo Details",-1)),r("div",ra,[t[12]||(t[12]=r("label",{for:"commodity",class:"form-label"},[i(" Default Commodity "),r("span",{class:"required"},"*")],-1)),y(Q,{id:"commodity",modelValue:d.value.commodity,"onUpdate:modelValue":t[2]||(t[2]=e=>d.value.commodity=e),placeholder:"Enter commodity type...",required:"",error:u.value.commodity},null,8,["modelValue","error"])]),r("div",ia,[r("div",na,[t[13]||(t[13]=r("label",{for:"quantity",class:"form-label"}," Standard Quantity (MT) ",-1)),y(Q,{id:"quantity",modelValue:d.value.quantity,"onUpdate:modelValue":t[3]||(t[3]=e=>d.value.quantity=e),modelModifiers:{number:!0},type:"number",min:"0",placeholder:"Optional quantity..."},null,8,["modelValue"])]),r("div",da,[t[14]||(t[14]=r("label",{for:"freight-rate",class:"form-label"}," Default Freight Rate ($/MT) ",-1)),y(Q,{id:"freight-rate",modelValue:d.value.freightRate,"onUpdate:modelValue":t[4]||(t[4]=e=>d.value.freightRate=e),modelModifiers:{number:!0},type:"number",min:"0",step:"0.01",placeholder:"Optional freight rate..."},null,8,["modelValue"])])])]),r("div",ua,[t[18]||(t[18]=r("h3",{class:"section-title"},"Route Information",-1)),r("div",ca,[r("div",ma,[t[16]||(t[16]=r("label",{for:"load-port",class:"form-label"}," Default Load Port ",-1)),y(Q,{id:"load-port",modelValue:d.value.loadPort,"onUpdate:modelValue":t[5]||(t[5]=e=>d.value.loadPort=e),placeholder:"Optional load port..."},null,8,["modelValue"])]),r("div",va,[t[17]||(t[17]=r("label",{for:"disch-port",class:"form-label"}," Default Discharge Port ",-1)),y(Q,{id:"disch-port",modelValue:d.value.dischPort,"onUpdate:modelValue":t[6]||(t[6]=e=>d.value.dischPort=e),placeholder:"Optional discharge port..."},null,8,["modelValue"])])])]),r("div",pa,[y(aa,{modelValue:d.value.costAllocation,"onUpdate:modelValue":t[7]||(t[7]=e=>d.value.costAllocation=e),onValidationChange:q},null,8,["modelValue"])]),r("div",fa,[r("div",ya,[r("label",ha,[C(r("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=e=>d.value.isDefault=e),class:"checkbox-input"},null,512),[[V,d.value.isDefault]]),t[19]||(t[19]=r("span",null,"Set as default template",-1))]),t[20]||(t[20]=r("p",{class:"help-text"},"The default template will be pre-selected when creating new cargo commitments.",-1))])]),r("div",ba,[y(H,{type:"button",variant:"secondary",onClick:w},{default:h(()=>[...t[21]||(t[21]=[i(" Cancel ",-1)])]),_:1}),y(H,{type:"submit",variant:"primary",disabled:e.submitting||!f.value},{default:h(()=>[i(n(e.submitting?"Saving...":s.value?"Update Template":"Create Template"),1)]),_:1},8,["disabled"])])],32)]),_:1},8,["show","title"]))}}),[["__scopeId","data-v-9fe6b27c"]]),Ca={class:"form-group"},_a={class:"form-group"},ka={class:"form-group"},Va={class:"form-row"},qa={class:"form-group"},Pa={class:"form-group"},wa={class:"form-row"},Sa={class:"form-group"},Aa={class:"form-group"},Da={key:0,class:"form-group"},Ta={class:"form-group"},Ea={class:"form-group"},xa={class:"form-actions"},Ua=w(a({__name:"CargoForm",props:{show:{type:Boolean},cargo:{default:null},submitting:{type:Boolean,default:!1}},emits:["close","submit"],setup(e,{emit:a}){const o=e,d=a,u=t(()=>!!o.cargo),m=g({id:"",commodity:"",quantity:0,loadPort:"",dischPort:"",laycanStart:"",laycanEnd:"",status:"Pending",freightRate:void 0,notes:void 0,costAllocation:void 0}),f=g({}),b=g(!0),V=[{value:"Pending",label:"Pending"},{value:"Assigned",label:"Assigned"},{value:"Completed",label:"Completed"},{value:"Cancelled",label:"Cancelled"}],q=t(()=>m.value.id&&m.value.commodity&&m.value.quantity>0&&m.value.loadPort&&m.value.dischPort&&m.value.laycanStart&&m.value.laycanEnd&&0===Object.keys(f.value).length&&b.value);function P(){m.value={id:"",commodity:"",quantity:0,loadPort:"",dischPort:"",laycanStart:"",laycanEnd:"",status:"Pending",freightRate:void 0,notes:void 0,costAllocation:void 0},f.value={},b.value=!0}function w(e){b.value=e}function S(){if(!function(){f.value={};let e=!0;return m.value.id||(f.value.id="Cargo ID is required",e=!1),m.value.commodity||(f.value.commodity="Commodity is required",e=!1),m.value.quantity<=0&&(f.value.quantity="Quantity must be greater than 0",e=!1),m.value.loadPort||(f.value.loadPort="Load port is required",e=!1),m.value.dischPort||(f.value.dischPort="Discharge port is required",e=!1),m.value.laycanStart||(f.value.laycanStart="Laycan start is required",e=!1),m.value.laycanEnd||(f.value.laycanEnd="Laycan end is required",e=!1),m.value.laycanStart&&m.value.laycanEnd&&new Date(m.value.laycanStart)>new Date(m.value.laycanEnd)&&(f.value.laycanEnd="Laycan end must be after laycan start",e=!1),e}())return;const e={...m.value};e.costAllocation&&(e.operationalCost=e.costAllocation.operationalCost,e.overheadCost=e.costAllocation.overheadCost,e.otherCost=e.costAllocation.otherCost),Object.keys(e).forEach(a=>{void 0===e[a]&&delete e[a]}),d("submit",e)}function A(){P(),d("close")}return v(()=>o.cargo,e=>{e?m.value={id:e.id,commodity:e.commodity,quantity:e.quantity,loadPort:e.loadPort,dischPort:e.dischPort,laycanStart:e.laycanStart,laycanEnd:e.laycanEnd,status:e.status,freightRate:e.freightRate,notes:e.notes,costAllocation:void 0!==e.operationalCost?{operationalCost:e.operationalCost||0,overheadCost:e.overheadCost||0,otherCost:e.otherCost||0,totalCost:(e.operationalCost||0)+(e.overheadCost||0)+(e.otherCost||0)}:void 0}:P(),f.value={}},{immediate:!0}),(a,t)=>(c(),p(te,{show:e.show,title:u.value?"Edit Cargo Commitment":"Add Cargo Commitment",onClose:A},{default:h(()=>[r("form",{onSubmit:k(S,["prevent"]),class:"cargo-form"},[r("div",Ca,[t[11]||(t[11]=r("label",{for:"cargo-id",class:"form-label"},[i(" Cargo ID "),r("span",{class:"required"},"*")],-1)),y(Q,{id:"cargo-id",modelValue:m.value.id,"onUpdate:modelValue":t[0]||(t[0]=e=>m.value.id=e),disabled:u.value,placeholder:"Enter cargo ID...",required:"",error:f.value.id},null,8,["modelValue","disabled","error"])]),r("div",_a,[t[12]||(t[12]=r("label",{for:"commodity",class:"form-label"},[i(" Commodity "),r("span",{class:"required"},"*")],-1)),y(Q,{id:"commodity",modelValue:m.value.commodity,"onUpdate:modelValue":t[1]||(t[1]=e=>m.value.commodity=e),placeholder:"Enter commodity type...",required:"",error:f.value.commodity},null,8,["modelValue","error"])]),r("div",ka,[t[13]||(t[13]=r("label",{for:"quantity",class:"form-label"},[i(" Quantity (MT) "),r("span",{class:"required"},"*")],-1)),y(Q,{id:"quantity",modelValue:m.value.quantity,"onUpdate:modelValue":t[2]||(t[2]=e=>m.value.quantity=e),modelModifiers:{number:!0},type:"number",min:"0",placeholder:"Enter quantity...",required:"",error:f.value.quantity},null,8,["modelValue","error"])]),r("div",Va,[r("div",qa,[t[14]||(t[14]=r("label",{for:"load-port",class:"form-label"},[i(" Load Port "),r("span",{class:"required"},"*")],-1)),y(Q,{id:"load-port",modelValue:m.value.loadPort,"onUpdate:modelValue":t[3]||(t[3]=e=>m.value.loadPort=e),placeholder:"Enter load port...",required:"",error:f.value.loadPort},null,8,["modelValue","error"])]),r("div",Pa,[t[15]||(t[15]=r("label",{for:"disch-port",class:"form-label"},[i(" Discharge Port "),r("span",{class:"required"},"*")],-1)),y(Q,{id:"disch-port",modelValue:m.value.dischPort,"onUpdate:modelValue":t[4]||(t[4]=e=>m.value.dischPort=e),placeholder:"Enter discharge port...",required:"",error:f.value.dischPort},null,8,["modelValue","error"])])]),r("div",wa,[r("div",Sa,[t[16]||(t[16]=r("label",{for:"laycan-start",class:"form-label"},[i(" Laycan Start "),r("span",{class:"required"},"*")],-1)),y(Q,{id:"laycan-start",modelValue:m.value.laycanStart,"onUpdate:modelValue":t[5]||(t[5]=e=>m.value.laycanStart=e),type:"date",required:"",error:f.value.laycanStart},null,8,["modelValue","error"])]),r("div",Aa,[t[17]||(t[17]=r("label",{for:"laycan-end",class:"form-label"},[i(" Laycan End "),r("span",{class:"required"},"*")],-1)),y(Q,{id:"laycan-end",modelValue:m.value.laycanEnd,"onUpdate:modelValue":t[6]||(t[6]=e=>m.value.laycanEnd=e),type:"date",required:"",error:f.value.laycanEnd},null,8,["modelValue","error"])])]),u.value?(c(),l("div",Da,[t[18]||(t[18]=r("label",{for:"status",class:"form-label"}," Status ",-1)),y(L,{id:"status",modelValue:m.value.status,"onUpdate:modelValue":t[7]||(t[7]=e=>m.value.status=e),options:V},null,8,["modelValue"])])):s("",!0),r("div",Ta,[t[19]||(t[19]=r("label",{for:"freight-rate",class:"form-label"}," Freight Rate ($/MT) ",-1)),y(Q,{id:"freight-rate",modelValue:m.value.freightRate,"onUpdate:modelValue":t[8]||(t[8]=e=>m.value.freightRate=e),modelModifiers:{number:!0},type:"number",min:"0",step:"0.01",placeholder:"Enter freight rate..."},null,8,["modelValue"])]),y(aa,{modelValue:m.value.costAllocation,"onUpdate:modelValue":t[9]||(t[9]=e=>m.value.costAllocation=e),onValidationChange:w},null,8,["modelValue"]),r("div",Ea,[t[20]||(t[20]=r("label",{for:"notes",class:"form-label"}," Notes ",-1)),C(r("textarea",{id:"notes","onUpdate:modelValue":t[10]||(t[10]=e=>m.value.notes=e),class:"form-textarea",rows:"3",placeholder:"Enter any additional notes..."},null,512),[[_,m.value.notes]])]),r("div",xa,[y(H,{type:"button",variant:"secondary",onClick:A},{default:h(()=>[...t[21]||(t[21]=[i(" Cancel ",-1)])]),_:1}),y(H,{type:"submit",variant:"primary",disabled:e.submitting||!q.value},{default:h(()=>[i(n(e.submitting?"Saving...":u.value?"Update Cargo":"Create Cargo"),1)]),_:1},8,["disabled"])])],32)]),_:1},8,["show","title"]))}}),[["__scopeId","data-v-1483d01c"]]),$a={class:"cargo-management"},Ba={class:"header"},La={class:"view-toggle"},Ra={key:0},Ia={key:1},Ma=w(a({__name:"CargoManagement",setup(a){const t=e(),i=g("commitments"),n=g(!1),d=g(null),u=g(!1),m=g(null);function p(){"commitments"===i.value?t.fetchCargo():t.fetchTemplates()}function f(){d.value=null,n.value=!0}function h(e){d.value=e,n.value=!0}async function b(e){confirm("Are you sure you want to delete this cargo commitment?")&&await t.deleteCargo(e.id)}function C(e){}async function _(e){let a=!1;a=d.value?!!(await t.updateCargo(d.value.id,e)):!!(await t.createCargo(e)),a&&k()}function k(){n.value=!1,d.value=null}function V(){m.value=null,u.value=!0}function w(e){m.value=e,u.value=!0}async function S(e){confirm(`Are you sure you want to delete template "${e.name}"?`)&&await t.deleteTemplate(e.id)}function A(e){i.value="commitments";const a={commodity:e.commodity,quantity:e.quantity||0,loadPort:e.loadPort||"",dischPort:e.dischPort||"",freightRate:e.freightRate,operationalCost:e.costAllocations?.operationalCost,overheadCost:e.costAllocations?.overheadCost,otherCost:e.costAllocations?.otherCost,status:"Pending"};d.value=a,n.value=!0}async function D(e){let a=!1;a=m.value?await t.updateTemplate(m.value.id,e):await t.createTemplate(e),a&&T()}function T(){u.value=!1,m.value=null}return q(()=>{p()}),v(i,()=>{p()}),(e,a)=>(c(),l("div",$a,[r("div",Ba,[a[2]||(a[2]=r("div",{class:"header-content"},[r("h1",null,"Cargo Management"),r("p",{class:"subtitle"},"Manage cargo commitments and templates.")],-1)),r("div",La,[r("button",{class:o(["toggle-btn",{active:"commitments"===i.value}]),onClick:a[0]||(a[0]=e=>i.value="commitments")}," Commitments ",2),r("button",{class:o(["toggle-btn",{active:"templates"===i.value}]),onClick:a[1]||(a[1]=e=>i.value="templates")}," Templates ",2)])]),"commitments"===i.value?(c(),l("div",Ra,[y(he,{cargo:P(t).cargoList,loading:P(t).loading,onAddCargo:f,onEditCargo:h,onDeleteCargo:b,onViewCargo:C},null,8,["cargo","loading"])])):"templates"===i.value?(c(),l("div",Ia,[y(Qe,{templates:P(t).templates,loading:P(t).loading,onCreate:V,onEdit:w,onDelete:S,onApply:A},null,8,["templates","loading"])])):s("",!0),y(Ua,{show:n.value,cargo:d.value,submitting:P(t).loading,onClose:k,onSubmit:_},null,8,["show","cargo","submitting"]),y(ga,{show:u.value,template:m.value,submitting:P(t).loading,onClose:T,onSubmit:D},null,8,["show","template","submitting"])]))}}),[["__scopeId","data-v-84ca6ca5"]]),Oa=Object.freeze(Object.defineProperty({__proto__:null,default:Ma},Symbol.toStringTag,{value:"Module"}));export{L as B,Oa as C,Q as a,H as b,te as c};
//# sourceMappingURL=view-cargomanagement-BocXzYqp.js.map
