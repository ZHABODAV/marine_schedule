import{d as a,r as e,w as t,g as l,p as s,a as o,b as d,e as n,k as i,m as r,q as u,s as c,t as v,h as p,u as b,o as h}from"./vendor-vue-CBmYbXPK.js";import{D as g,N as m}from"./vendor-vis-C6bSwO3L.js";import{c as f}from"./stores-B-Lw8dsK.js";import{L as k,_ as w}from"./component-financial-CtXviO0A.js";import{b as y}from"./services-DnyArwnx.js";const R={class:"network-container"},P={class:"network-controls"},E={class:"control-group"},$={class:"button-group"},S={key:0},x={key:1},C={key:0,class:"alert alert-error"},V={key:1,class:"loading-state"},z={key:2,class:"network-stats"},N={class:"stat-card"},_={class:"stat-value"},j={class:"stat-card"},D={class:"stat-value"},F={class:"stat-card"},L={class:"stat-value"},U={class:"stat-card"},W={class:"stat-value"},q={class:"stat-card"},B={class:"stat-value"},I={class:"stat-card"},O={class:"stat-value"},T=w(a({__name:"NetworkVisualization",setup(a){const w=f(),T=e(null),A=e(!0),H=e(!0),Q=e(!0),G=e(!0),J=e(!1),K=e("");let M=null,X=null,Y=null;const Z=e(null),aa=()=>{if(!X||!Y)return;const a=[],e=[],t=new Set,l=w.routes.map(a=>[a.from,a.to]).flat().filter((a,e,t)=>t.indexOf(a)===e);l.forEach(e=>{A.value&&(a.push({id:e,label:e,group:"port",title:`Port: ${e}`}),t.add(e))});const s=["Plant A","Plant B","Plant C"];s.forEach(e=>{H.value&&(a.push({id:e,label:e,group:"plant",title:`Plant: ${e}`}),t.add(e))}),Q.value&&w.routes.forEach((a,l)=>{t.has(a.from)&&t.has(a.to)&&e.push({id:`sea-${l}`,from:a.from,to:a.to,label:`${a.distance||0} nm`,title:`Route: ${a.from} → ${a.to}\nDistance: ${a.distance||0} nm`,color:{color:"#4a9eff"},width:2})}),G.value&&H.value&&s.forEach((a,s)=>{const o=l[s%l.length];t.has(a)&&t.has(o)&&e.push({id:`rail-${s}`,from:a,to:o,label:"Rail",title:`Rail: ${a} → ${o}`,color:{color:"#00b894"},width:1,dashes:!0})}),X.clear(),Y.clear(),X.add(a),Y.add(e),Z.value={totalNodes:a.length,ports:l.length,plants:s.length,totalEdges:e.length,seaRoutes:e.filter(a=>a.id?.toString().startsWith("sea-")).length,railRoutes:e.filter(a=>a.id?.toString().startsWith("rail-")).length}},ea=async()=>{J.value=!0,K.value="";try{await w.fetchRoutes(),aa(),M&&M.stabilize()}catch(a){K.value=a instanceof Error?a.message:"Failed to build network"}finally{J.value=!1}},ta=async()=>{try{await y()}catch(a){K.value=a instanceof Error?a.message:"Failed to export network"}},la=()=>{M&&M.fit({animation:{duration:500,easingFunction:"easeInOutQuad"}})};return t([A,H,Q,G],()=>{aa()}),l(async()=>{T.value&&(X=new g([]),Y=new g([]),M=new m(T.value,{nodes:X,edges:Y},{nodes:{shape:"dot",size:20,font:{size:14,color:"#e4e6eb"},borderWidth:2},edges:{arrows:{to:{enabled:!0,scaleFactor:.5}},smooth:{type:"continuous"}},groups:{port:{color:{background:"#0984e3",border:"#74b9ff"},shape:"circle"},plant:{color:{background:"#00b894",border:"#55efc4"},shape:"square"}},physics:{enabled:!0,stabilization:{enabled:!0,iterations:200},barnesHut:{gravitationalConstant:-2e3,springConstant:.001,springLength:200,damping:.5}},interaction:{hover:!0,tooltipDelay:100,zoomView:!0,dragView:!0}}),M.on("selectNode",a=>{a.nodes.length>0&&a.nodes[0]}),M.on("selectEdge",a=>{a.edges.length>0&&a.edges[0]})),await ea()}),s(()=>{M&&(M.destroy(),M=null)}),(a,e)=>(h(),o("div",R,[d("div",P,[d("div",E,[d("label",null,[i(d("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>A.value=a),type:"checkbox"},null,512),[[c,A.value]]),e[4]||(e[4]=u(" Show Ports ",-1))]),d("label",null,[i(d("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>H.value=a),type:"checkbox"},null,512),[[c,H.value]]),e[5]||(e[5]=u(" Show Plants ",-1))]),d("label",null,[i(d("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>Q.value=a),type:"checkbox"},null,512),[[c,Q.value]]),e[6]||(e[6]=u(" Sea Routes ",-1))]),d("label",null,[i(d("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>G.value=a),type:"checkbox"},null,512),[[c,G.value]]),e[7]||(e[7]=u(" Rail Routes ",-1))])]),d("div",$,[d("button",{onClick:ea,class:"btn btn-primary"},[J.value?(h(),o("span",S,"Loading...")):(h(),o("span",x,"Refresh"))]),d("button",{onClick:ta,class:"btn btn-secondary"}," Export Data "),d("button",{onClick:la,class:"btn btn-secondary"}," Reset View ")])]),K.value?(h(),o("div",C,v(K.value),1)):n("",!0),J.value?(h(),o("div",V,[p(k),e[8]||(e[8]=d("p",null,"Building network visualization...",-1))])):n("",!0),i(d("div",{ref_key:"networkContainer",ref:T,class:"network-graph"},null,512),[[b,!J.value]]),Z.value?(h(),o("div",z,[d("div",N,[e[9]||(e[9]=d("h4",null,"Total Nodes",-1)),d("p",_,v(Z.value.totalNodes),1)]),d("div",j,[e[10]||(e[10]=d("h4",null,"Ports",-1)),d("p",D,v(Z.value.ports),1)]),d("div",F,[e[11]||(e[11]=d("h4",null,"Plants",-1)),d("p",L,v(Z.value.plants),1)]),d("div",U,[e[12]||(e[12]=d("h4",null,"Total Connections",-1)),d("p",W,v(Z.value.totalEdges),1)]),d("div",q,[e[13]||(e[13]=d("h4",null,"Sea Routes",-1)),d("p",B,v(Z.value.seaRoutes),1)]),d("div",I,[e[14]||(e[14]=d("h4",null,"Rail Routes",-1)),d("p",O,v(Z.value.railRoutes),1)])])):n("",!0),e[15]||(e[15]=r('<div class="network-legend" data-v-40add4db><h4 data-v-40add4db>Legend</h4><div class="legend-items" data-v-40add4db><div class="legend-item" data-v-40add4db><div class="legend-node port-node" data-v-40add4db></div><span data-v-40add4db>Port</span></div><div class="legend-item" data-v-40add4db><div class="legend-node plant-node" data-v-40add4db></div><span data-v-40add4db>Plant/Station</span></div><div class="legend-item" data-v-40add4db><div class="legend-line sea-route" data-v-40add4db></div><span data-v-40add4db>Sea Route</span></div><div class="legend-item" data-v-40add4db><div class="legend-line rail-route" data-v-40add4db></div><span data-v-40add4db>Rail Route</span></div></div></div>',1))]))}}),[["__scopeId","data-v-40add4db"]]);export{T as N};
//# sourceMappingURL=component-network-BqCnmEAi.js.map
