# Руководство пользователя

**Версия:** 2.0.0  
**Дата обновления:** Январь 2026

## 1. Введение

Система планирования судов (Vessel Scheduling System) — это комплексная веб-платформа, предназначенная для управления морскими грузоперевозками. Она облегчает планирование рейсов, отслеживание использования причалов, оптимизацию маршрутов и расчет экономической эффективности.

### 1.1 Ключевые возможности

*   **Автоматическое формирование расписания**: Автоматическая оптимизация графиков флота.
*   **Интерактивные диаграммы Ганта**: Визуализация расписаний и операций.
*   **Модули управления**: Специализированные инструменты для управления грузами, судами и маршрутами.
*   **Финансовый анализ**: Детальная отчетность по доходам, расходам и прибыли.
*   **Визуализация сети**: Интерактивные карты для анализа маршрутов.
*   **Экспорт данных**: Возможность экспорта в Excel и PDF.
*   **Современный интерфейс**: Адаптивный веб-интерфейс на базе Vue.js.

Приложение работает в веб-браузере (рекомендуются Chrome, Edge или Firefox). Все данные хранятся локально на компьютере пользователя, обеспечивая конфиденциальность. Подключение к Интернету требуется только для первоначальной настройки.

## 2. Системные требования

*   **Операционная система**: Windows 10/11, macOS, Linux
*   **Python**: Версия 3.8 или выше
*   **Node.js**: Версия 16 или выше (требуется для разработки)
*   **Браузер**: Chrome 90+, Firefox 88+, Edge 90+ или Safari 14+
*   **ОЗУ**: Минимум 4 ГБ
*   **Дисковое пространство**: Минимум 500 МБ

## 3. Установка и первый запуск

### 3.1 Шаг 1: Установка зависимостей

Для первоначальной настройки приложения:

1.  Убедитесь, что установлен **Python 3.8+**. Проверьте версию, выполнив команду `python --version` в командной строке.
2.  Перейдите в каталог программы.
3.  **Пользователи Windows**: Дважды щелкните файл `install.bat`.
    *   Откроется окно командной строки.
    *   Дождитесь сообщения "Installation complete" (Установка завершена).
    *   Нажмите любую клавишу, чтобы закрыть окно.
4.  **Пользователи Linux/macOS**: Выполните следующие команды в терминале:
    ```bash
    pip install -r requirements.txt
    npm install
    ```

### 3.2 Шаг 2: Запуск программы

Для запуска приложения:

1.  **Пользователи Windows**: Дважды щелкните файл `start.bat`.
2.  Откроется окно сервера. **Не закрывайте это окно**, так как оно поддерживает работу сервера приложений.
    *   Об успешном запуске свидетельствует сообщение: "Running on http://127.0.0.1:5000".
3.  Веб-браузер по умолчанию автоматически откроет интерфейс приложения.

**Ручной доступ**:
Если браузер не открылся автоматически, перейдите по адресу:
*   **Новый интерфейс**: `http://localhost:5173` (Разработка) или `http://localhost:5000` (Продакшн)
*   **Классический интерфейс**: `http://localhost:5000/vessel_scheduler_complete.html`

**Запуск на Linux/macOS**:
```bash
# Терминал 1: Запуск бэкенда
python api_server_enhanced.py

# Терминал 2: Запуск фронтенда (Разработка)
npm run dev
```

### 3.3 Остановка программы

Для завершения работы приложения:
1.  Закройте вкладку браузера.
2.  В окне сервера нажмите `Ctrl+C` или просто закройте окно.

## 4. Обзор интерфейса

Интерфейс разработан для эффективности и простоты использования и включает:

*   **Боковое меню навигации**: Обеспечивает быстрый доступ ко всем модулям.
*   **Верхнее меню**: Содержит глобальные настройки и действия пользователя.
*   **Основная рабочая область**: Отображает содержимое активного модуля.
*   **Панель уведомлений**: Показывает системные оповещения и обновления статуса.

### 4.1 Дашборд (Панель управления)

Дашборд предоставляет общий обзор состояния системы:

*   **Статистика**: Сводные данные по количеству судов, грузов и маршрутов.
*   **Активные рейсы**: Статус текущих операций в реальном времени.
*   **Уведомления**: Оповещения о конфликтах в расписании или требуемых действиях.
*   **Быстрые действия**: Ярлыки для часто используемых функций.

### 4.2 Управление судами

Этот модуль отвечает за базу данных флота.

**Просмотр списка судов**:
1.  Перейдите в раздел "Суда" (Vessels).
2.  В таблице отображаются все зарегистрированные суда.
3.  Используйте строку поиска и фильтры для нахождения конкретных судов.

**Добавление нового судна**:
1.  Нажмите кнопку "Добавить судно" (Add Vessel).
2.  Заполните форму с данными о судне:
    *   **ID судна**: Уникальный идентификатор.
    *   **Название**: Официальное название судна.
    *   **Тип**: Классификация (например, Танкер, Балкер).
    *   **Дедвейт (DWT)**: Грузоподъемность в метрических тоннах.
    *   **Скорость**: Эксплуатационная скорость в узлах.
    *   **Расход топлива**: Суточное потребление в тоннах.
3.  Нажмите "Сохранить" (Save) для подтверждения.

**Редактирование данных судна**:
1.  Выберите судно из списка.
2.  Нажмите "Редактировать" (Edit) для изменения параметров.
3.  Сохраните изменения для обновления записи.

### 4.3 Управление грузами

Управление обязательствами по перевозке грузов и заказами.

**Добавление груза**:
1.  Перейдите в раздел "Грузы" (Cargo) и нажмите "Добавить груз" (Add Cargo).
2.  Введите необходимую информацию:
    *   **ID груза**: Уникальный ссылочный номер.
    *   **Товар**: Тип груза (например, Уголь, Зерно).
    *   **Количество (MT)**: Объем в метрических тоннах.
    *   **Порт погрузки**: Порт отправления.
    *   **Порт выгрузки**: Порт назначения.
    *   **Laycan Начало/Конец**: Согласованное окно погрузки.
3.  Дополнительные поля включают Ставку фрахта и Примечания.
4.  Нажмите "Создать груз" (Create Cargo).

**Определения статусов груза**:
*   **Ожидает (Pending)**: Ожидает назначения судна.
*   **Назначен (Assigned)**: Запланирован к перевозке.
*   **Завершен (Completed)**: Перевозка завершена.
*   **Отменен (Cancelled)**: Заказ отозван.

### 4.4 Управление маршрутами

Настройка морских маршрутов и ограничений.

**Создание маршрута**:
1.  Перейдите в раздел "Маршруты" (Routes) и нажмите "Новый маршрут" (New Route).
2.  Определите параметры маршрута:
    *   **Порты отправления/назначения**: Пункты начала и конца маршрута.
    *   **Расстояние**: Морское расстояние в морских милях.
    *   **Проливы/Каналы**: Транзитные точки (например, Суэц, Панама).
    *   **Ограничения**: Ограничения по осадке или ширине.
3.  Сохраните конфигурацию маршрута.

**Визуализация сети**:
Перейдите на вкладку "Визуализация сети" (Network Visualization) для просмотра интерактивной карты маршрутной сети, отображающей узлы (порты) и связи (маршруты).

### 4.5 Формирование расписания

Основной инструмент планирования рейсов.

**Генерация расписания**:
1.  Откройте модуль "Конструктор рейсов" (Voyage Builder).
2.  Выберите регион эксплуатации:
    *   **Balakovo**: Речные перевозки.
    *   **Deepsea**: Международные морские рейсы.
    *   **Olya**: Специализированные региональные маршруты.
3.  Нажмите "Сформировать расписание" (Generate Schedule).
4.  Система рассчитает оптимальное распределение и отобразит результаты на диаграмме Ганта.

**Работа с диаграммой Ганта**:
*   **Временная шкала**: Визуальное представление деятельности судов.
*   **Легенда**:
    *   **L**: Погрузка (Loading)
    *   **D**: Выгрузка (Discharge)
    *   **T**: Переход с грузом (Transit)
    *   **B**: Балластный переход (Ballast)
    *   **C**: Проход канала (Canal Transit)
    *   **F**: Бункеровка (Bunkering)
*   **Управление**: Масштабирование шкалы, фильтрация по судам, обновление данных или экспорт в Excel.

### 4.6 Финансовый анализ

Анализ экономической эффективности флота.

**Просмотр отчетов**:
1.  Перейдите в раздел "Финансы" (Finance).
2.  Выберите период анализа.
3.  Просмотрите ключевые показатели:
    *   **Общая выручка**: Валовая прибыль от фрахта.
    *   **Расходы**: Операционные затраты (топливо, портовые сборы).
    *   **Прибыль**: Чистая прибыль.
    *   **Эффективность флота**: Процент использования.

**Экспорт отчетов**:
Нажмите "Скачать отчет" (Download Report) для формирования детальной ведомости в Excel.

### 4.7 Отчеты и экспорт

Система предлагает различные форматы отчетности:

1.  **Диаграмма Ганта**: Визуализация расписания.
2.  **Сводка по рейсам**: Табличные данные всех операций.
3.  **Использование флота**: Анализ загрузки судов.
4.  **Финансовый отчет**: Детализация доходов и расходов.
5.  **Использование причалов**: Анализ пропускной способности порта.

**Процедура экспорта**:
1.  Выберите желаемый тип отчета.
2.  Нажмите "Экспорт" или "Скачать".
3.  Выберите формат (Excel, CSV, PDF).
4.  Файл будет сохранен в папку загрузок по умолчанию.

## 5. Управление данными

### 5.1 Импорт данных

Система поддерживает массовый импорт данных через файлы CSV и Excel. Шаблоны находятся в каталоге `input/`.

**Ключевые шаблоны**:
*   `input/deepsea/vessels.csv`: Реестр судов.
*   `input/deepsea/ports_deepsea.csv`: База данных портов.
*   `input/deepsea/routes_deepsea.csv`: Определения маршрутов.
*   `sample_data/CargoCommitments.csv`: Заказы на перевозку.

**Шаги импорта**:
1.  Подготовьте файл данных, используя стандартный шаблон.
2.  В приложении выберите "Импорт данных" (Import Data).
3.  Загрузите файл.
4.  Система проверит данные и сообщит об ошибках.

**Формат даты**: Используйте `YYYY-MM-DD` (например, 2025-01-15) или `DD.MM.YYYY`.

### 5.2 Резервное копирование и восстановление

**Создание резервной копии**:
1.  Перейдите в "Настройки" > "Резервное копирование" (Settings > Backup).
2.  Нажмите "Создать резервную копию" (Create Backup).
3.  Данные экспортируются в виде ZIP-архива.

**Восстановление данных**:
1.  Перейдите в "Настройки" > "Восстановление" (Settings > Restore).
2.  Загрузите ZIP-файл резервной копии.
3.  Подтвердите процесс восстановления.

### 5.3 Очистка данных

**Внимание**: Это действие необратимо.
1.  Перейдите в "Настройки" > "Очистить данные" (Settings > Clear Data).
2.  Выберите область очистки (Все данные, Только расписания, Только грузы).
3.  Подтвердите удаление.

## 6. Устранение неполадок

### 6.1 Проблемы при запуске сервера
*   **Симптом**: Сообщение об ошибке при запуске.
*   **Решение**:
    *   Убедитесь, что порт 5000 свободен.
    *   Проверьте установку Python.
    *   Повторно запустите `install.bat` для проверки зависимостей.

### 6.2 Проблемы отображения интерфейса
*   **Симптом**: Пустая страница или ошибки отрисовки.
*   **Решение**:
    *   Очистите кэш браузера (`Ctrl+Shift+Delete`).
    *   Попробуйте другой браузер.
    *   Проверьте консоль браузера (`F12`) на наличие ошибок.

### 6.3 Проблемы сохранения данных
*   **Симптом**: Изменения теряются после обновления страницы.
*   **Решение**:
    *   Убедитесь, что в браузере включено локальное хранилище (LocalStorage).
    *   Проверьте наличие свободного дискового пространства.

## 7. Глоссарий

*   **Балласт (Ballast)**: Этап рейса, когда судно следует пустым в порт погрузки.
*   **Причал (Berth)**: Специально оборудованное место в порту для швартовки судов.
*   **Дедвейт (DWT)**: Полная грузоподъемность судна, включая груз, топливо и припасы.
*   **Диаграмма Ганта (Gantt Chart)**: Ленточная диаграмма, иллюстрирующая график работ.
*   **Лейкэн (Laycan)**: Период времени, в течение которого судовладелец должен подать судно под погрузку.
*   **MT**: Метрическая тонна (1000 кг).
*   **Транзит (Transit)**: Этап рейса, когда судно следует с грузом.
*   **Рейс (Voyage)**: Полный цикл перевозки, включая погрузку, переход и выгрузку.

---
*Технические детали реализации см. в Руководстве разработчика и Справочнике API.*
